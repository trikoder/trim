<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Base controllers | Trikoder Trim</title>
    <meta name="description" content="Responsive UI framework for building content management systems with simple authoring api. Designed to run as a browser application connected to json:api powered backend.">
    <link rel="shortcut icon" href="/trim/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/trim/apple-touch-icon-152x152.png">
  <link rel="icon" sizes="196x196" href="/trim/favicon-196x196.png">
    
    <link rel="preload" href="/trim/assets/css/0.styles.068ed567.css" as="style"><link rel="preload" href="/trim/assets/js/app.8be61ef6.js" as="script"><link rel="preload" href="/trim/assets/js/7.b2cb2669.js" as="script"><link rel="prefetch" href="/trim/assets/js/10.56913e95.js"><link rel="prefetch" href="/trim/assets/js/11.8511dc49.js"><link rel="prefetch" href="/trim/assets/js/12.ec3b8810.js"><link rel="prefetch" href="/trim/assets/js/13.e4ead714.js"><link rel="prefetch" href="/trim/assets/js/2.ce90de3a.js"><link rel="prefetch" href="/trim/assets/js/3.1721f297.js"><link rel="prefetch" href="/trim/assets/js/4.7bfaf7b5.js"><link rel="prefetch" href="/trim/assets/js/5.1ac66136.js"><link rel="prefetch" href="/trim/assets/js/6.8df6d9a4.js"><link rel="prefetch" href="/trim/assets/js/8.1ffcc1c1.js"><link rel="prefetch" href="/trim/assets/js/9.9431c1d2.js">
    <link rel="stylesheet" href="/trim/assets/css/0.styles.068ed567.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/trim/" class="home-link router-link-active"><!----> <span class="site-name">Trikoder Trim</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/trim/about.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="https://trikoder.github.io/trim/demo/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/trikoder/trim" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/trim/about.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="https://trikoder.github.io/trim/demo/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/trikoder/trim" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/trim/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/trim/about.html" class="sidebar-link">About</a></li><li><a href="/trim/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/trim/core-concepts-and-api.html" class="sidebar-link">Core concepts and api</a></li><li><a href="/trim/adding-resource.html" class="sidebar-link">Adding resource</a></li><li><a href="/trim/form-elements.html" class="sidebar-link">Form elements</a></li><li><a href="/trim/list-elements.html" class="sidebar-link">List elements</a></li><li><a href="/trim/base-controllers.html" aria-current="page" class="active sidebar-link">Base controllers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/trim/base-controllers.html#resource-controller" class="sidebar-link">Resource controller</a></li><li class="sidebar-sub-header"><a href="/trim/base-controllers.html#resource-edit-controller" class="sidebar-link">Resource edit controller</a></li><li class="sidebar-sub-header"><a href="/trim/base-controllers.html#nested-resource-controller" class="sidebar-link">Nested resource controller</a></li><li class="sidebar-sub-header"><a href="/trim/base-controllers.html#media-resource-controller" class="sidebar-link">Media resource controller</a></li></ul></li><li><a href="/trim/changelog.html" class="sidebar-link">Changelog</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="base-controllers"><a href="#base-controllers" class="header-anchor">#</a> Base controllers</h1> <p>Trim includes a number of predefined UI base controllers for common use cases.
Beside resource controller that is most frequently extended base controllers for resource edit, nested resource and media resource are available.</p> <h2 id="resource-controller"><a href="#resource-controller" class="header-anchor">#</a> Resource controller</h2> <p>Used when you need to define how resource is browsed, filtered and sorted in list, what form fields are rendered when resource is created or updated.
Example <a href="https://trikoder.github.io/trim/demo/index.html#page" target="_blank" rel="noopener noreferrer">demo controller<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/trikoder/trim/tree/master/demo/controllers/page.js" target="_blank" rel="noopener noreferrer">codebase<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Code example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    resourceName<span class="token operator">:</span> <span class="token string">'tag'</span><span class="token punctuation">,</span>

    <span class="token function">setupList</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>list<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// how is resource listed?</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">setupEdit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>edit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// how is resource edited?</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Sometimes empty resource is required for meaningful create admin interface.
In this case draft resource is created on api (with id but no attributes and relation data) and edited in UI immediately.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    resourceName<span class="token operator">:</span> <span class="token string">'tag'</span><span class="token punctuation">,</span>
    createRequiresDraft<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Explicit included relations and data can be specifed on resource controller index and edit actions:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    resourceName<span class="token operator">:</span> <span class="token string">'tag'</span><span class="token punctuation">,</span>

    includedRelationships<span class="token operator">:</span> <span class="token punctuation">{</span>
        index<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'media'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        edit<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'media'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">,</span> <span class="token string">'author.media'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token operator">...</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Default behaviour for resource saving is for related resources to be saved before main resource.
Alternate save strategy for main and related resources when resource is created is available by
settting 'createRelatedStrategy' property on controller to 'relatedLast' value.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    resourceName<span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
    createRelatedStrategy<span class="token operator">:</span> <span class="token string">'relatedLast'</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="resource-edit-controller"><a href="#resource-edit-controller" class="header-anchor">#</a> Resource edit controller</h2> <p>Used when you want to edit one specific resource and listing is not available.
Implement &quot;getModel&quot; method and provide model instance to edit.
Example <a href="https://trikoder.github.io/trim/demo/index.html#my-settings" target="_blank" rel="noopener noreferrer">demo controller<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/trikoder/trim/tree/master/demo/controllers/mySettings.js" target="_blank" rel="noopener noreferrer">codebase<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Code example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    extendsController<span class="token operator">:</span> <span class="token string">'BaseResourceEdit'</span><span class="token punctuation">,</span>

    <span class="token function-variable function">getModel</span><span class="token operator">:</span> <span class="token parameter">Model</span> <span class="token operator">=&gt;</span> Model<span class="token punctuation">.</span><span class="token function">getFromApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token function">setupEdit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>edit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setPageTitle</span><span class="token punctuation">(</span><span class="token string">'My settings'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addSaveControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        edit<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span><span class="token string">'TextFormElement'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            label<span class="token operator">:</span> <span class="token string">'Email'</span><span class="token punctuation">,</span>
            name<span class="token operator">:</span> <span class="token string">'email'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="nested-resource-controller"><a href="#nested-resource-controller" class="header-anchor">#</a> Nested resource controller</h2> <p>Used for hierarchal resources that can be presented in nested tree view form.
Categories as resources usually have parent and child categories.
Example <a href="https://trikoder.github.io/trim/demo/index.html#category" target="_blank" rel="noopener noreferrer">demo controller<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/trikoder/trim/tree/master/demo/controllers/category.js" target="_blank" rel="noopener noreferrer">codebase<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Lets examine category api response:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'category'</span><span class="token punctuation">,</span>
    id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    attributes<span class="token operator">:</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">'Category 1'</span><span class="token punctuation">,</span>
        description<span class="token operator">:</span> <span class="token string">'Aenean gravida, orci in sagittis tincidunt, dolor quam pellentesque dolor, nec viverra neque nunc id mi.'</span><span class="token punctuation">,</span>
        published<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        imageThumbnailUrl<span class="token operator">:</span> <span class="token string">'http://pipsum.com/400x300.jpg?v=1'</span><span class="token punctuation">,</span>
        imageOriginalUrl<span class="token operator">:</span> <span class="token string">'http://pipsum.com/1200x900.jpg?v=1'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    relationships<span class="token operator">:</span> <span class="token punctuation">{</span>
        parentCategory<span class="token operator">:</span> <span class="token punctuation">{</span>
            data<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'category'</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        childCategories<span class="token operator">:</span> <span class="token punctuation">{</span>
            data<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">'7'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'category'</span><span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Resource hierarchy is defined via parentCategory and childCategories relations.</p> <p>Our category resource controller should extend base nested resource controller.
Via resourceConfig property we define parent and children relation mappings.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    resourceName<span class="token operator">:</span> <span class="token string">'category'</span><span class="token punctuation">,</span>
    extendsController<span class="token operator">:</span> <span class="token string">'BaseNestedResource'</span><span class="token punctuation">,</span>
    mapParentTo<span class="token operator">:</span> <span class="token string">'parentCategory'</span><span class="token punctuation">,</span>
    mapChildrenTo<span class="token operator">:</span> <span class="token string">'childCategories'</span><span class="token punctuation">,</span>

    <span class="token function">setupList</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>list<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// how is resource listed?</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">setupEdit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>edit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// how is resource edited?</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Resource config has following defaults:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    mapParentTo<span class="token operator">:</span> <span class="token string">'parent'</span><span class="token punctuation">,</span>
    mapChildrenTo<span class="token operator">:</span> <span class="token string">'children'</span><span class="token punctuation">,</span>
    mapLevelTo<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    mapIsLeafTo<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Properties mapChildrenTo, mapLevelTo, mapIsLeafTo can be defined as strings or functions if needed.</p> <h2 id="media-resource-controller"><a href="#media-resource-controller" class="header-anchor">#</a> Media resource controller</h2> <p>Used for browse, create (upload) and edit media resources sush as images or files.
Example <a href="https://trikoder.github.io/trim/demo/index.html#media" target="_blank" rel="noopener noreferrer">demo controller<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/trikoder/trim/tree/master/demo/controllers/media.js" target="_blank" rel="noopener noreferrer">codebase<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Lets examine typical media api response:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'media'</span><span class="token punctuation">,</span>
    id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    attributes<span class="token operator">:</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">'Media item 1'</span><span class="token punctuation">,</span>
        caption<span class="token operator">:</span> <span class="token string">'Aenean gravida, orci in sagittis tincidunt, dolor quam pellentesque dolor, nec viverra neque nunc id mi.'</span><span class="token punctuation">,</span>
        mediaType<span class="token operator">:</span> <span class="token string">'image'</span><span class="token punctuation">,</span>
        thumbnailUrl<span class="token operator">:</span> 'http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pipsum<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">400</span>x300<span class="token punctuation">.</span>jpg<span class="token punctuation">,</span>
        originalUrl<span class="token operator">:</span> 'http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pipsum<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">1200</span>x900<span class="token punctuation">.</span>jpg
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Example media controller is shown bellow.
Via resource config propery we define list of media types (image, file, videoEmbed) our controller is handling.
For each media type a method for edit handling is defined (setup[MediaType]Edit).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    extendsController<span class="token operator">:</span> <span class="token string">'BaseMediaResource'</span><span class="token punctuation">,</span>
    resourceName<span class="token operator">:</span> <span class="token string">'media'</span><span class="token punctuation">,</span>
    resourceCaption<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
    mediaTypes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">,</span> <span class="token string">'file'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'videoEmbed'</span><span class="token punctuation">,</span>
        createPageTitle<span class="token operator">:</span> <span class="token string">'Create video embed'</span><span class="token punctuation">,</span>
        hasUploadUi<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token function">setupList</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>list<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addCreateImageControl</span><span class="token punctuation">(</span><span class="token string">'Create new image'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addDropdownControl</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            caption<span class="token operator">:</span> <span class="token string">'Create video embed'</span><span class="token punctuation">,</span>
            action<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>openCreateVideoEmbed
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            caption<span class="token operator">:</span> <span class="token string">'Upload file'</span><span class="token punctuation">,</span>
            action<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>openCreateFile
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token operator">...</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">setupImageEdit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>edit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addToIndexControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addSaveControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        edit<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span><span class="token string">'MediaPreviewFormElement'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            label<span class="token operator">:</span> <span class="token string">'Photography'</span><span class="token punctuation">,</span>
            name<span class="token operator">:</span> <span class="token string">'mediaPreview'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token operator">...</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">setupVideoEmbedEdit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>edit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token operator">...</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">setupFileEdit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>edit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token operator">...</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>For our media controller to work properly we have to define following route:</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'media'</span><span class="token punctuation">,</span> hasCreateRoute<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">,</span> <span class="token string">'videoEmbed'</span><span class="token punctuation">,</span> <span class="token string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/trim/list-elements.html" class="prev">
          List elements
        </a></span> <span class="next"><a href="/trim/changelog.html">
          Changelog
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/trim/assets/js/app.8be61ef6.js" defer></script><script src="/trim/assets/js/7.b2cb2669.js" defer></script>
  </body>
</html>
