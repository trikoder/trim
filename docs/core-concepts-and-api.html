<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Core concepts and api | Trikoder Trim</title>
    <meta name="description" content="Responsive UI framework for building content management systems with simple authoring api. Designed to run as a browser application connected to json:api powered backend.">
    <link rel="shortcut icon" href="/trim/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/trim/apple-touch-icon-152x152.png">
  <link rel="icon" sizes="196x196" href="/trim/favicon-196x196.png">
    
    <link rel="preload" href="/trim/assets/css/0.styles.068ed567.css" as="style"><link rel="preload" href="/trim/assets/js/app.2a52fffe.js" as="script"><link rel="preload" href="/trim/assets/js/9.ab60805a.js" as="script"><link rel="prefetch" href="/trim/assets/js/10.56913e95.js"><link rel="prefetch" href="/trim/assets/js/11.8511dc49.js"><link rel="prefetch" href="/trim/assets/js/12.ec3b8810.js"><link rel="prefetch" href="/trim/assets/js/13.e4ead714.js"><link rel="prefetch" href="/trim/assets/js/2.ce90de3a.js"><link rel="prefetch" href="/trim/assets/js/3.1721f297.js"><link rel="prefetch" href="/trim/assets/js/4.7bfaf7b5.js"><link rel="prefetch" href="/trim/assets/js/5.1ac66136.js"><link rel="prefetch" href="/trim/assets/js/6.89a789d0.js"><link rel="prefetch" href="/trim/assets/js/7.b2cb2669.js"><link rel="prefetch" href="/trim/assets/js/8.d194a8c1.js">
    <link rel="stylesheet" href="/trim/assets/css/0.styles.068ed567.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/trim/" class="home-link router-link-active"><!----> <span class="site-name">Trikoder Trim</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/trim/about.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="https://trikoder.github.io/trim/demo/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/trikoder/trim" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/trim/about.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="https://trikoder.github.io/trim/demo/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/trikoder/trim" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/trim/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/trim/about.html" class="sidebar-link">About</a></li><li><a href="/trim/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/trim/core-concepts-and-api.html" aria-current="page" class="active sidebar-link">Core concepts and api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#resource-controller" class="sidebar-link">Resource controller</a></li><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#resource-list" class="sidebar-link">Resource list</a></li><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#resource-edit" class="sidebar-link">Resource edit</a></li><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#services" class="sidebar-link">Services</a></li><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#router" class="sidebar-link">Router</a></li><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#navigation" class="sidebar-link">Navigation</a></li><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#application" class="sidebar-link">Application</a></li><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/trim/core-concepts-and-api.html#authentication" class="sidebar-link">Authentication</a></li></ul></li><li><a href="/trim/adding-resource.html" class="sidebar-link">Adding resource</a></li><li><a href="/trim/form-elements.html" class="sidebar-link">Form elements</a></li><li><a href="/trim/list-elements.html" class="sidebar-link">List elements</a></li><li><a href="/trim/base-controllers.html" class="sidebar-link">Base controllers</a></li><li><a href="/trim/changelog.html" class="sidebar-link">Changelog</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="core-concepts-and-api"><a href="#core-concepts-and-api" class="header-anchor">#</a> Core concepts and api</h1> <p>Understanding of how core components work is essential for building applications with Trikoder Trim.
This chapter provides insight into resource controller, resource list, resource edit, router, navigation, service container and application object.</p> <h2 id="resource-controller"><a href="#resource-controller" class="header-anchor">#</a> Resource controller</h2> <p>Resource controller component is a central place to define user interface for given resource.
Here we define how resource is browsed, filtered and sorted in list, what form fields are rendered when resource is created or updated.</p> <p>In most use cases controller looks like a simple configuration file.
This configuration based architecture delegates most of the work to components that are composed out of our sight.
Resource controller is a container component which calls service components for listing and editing resources who build their own component subtrees - all that is abstracted from user via simple and easy to use api.</p> <p>All resource controllers share same basic skeleton. We define what resource type controller is handling (resourceName) and implement methods for resource listing (setupList) and resource editing (setupEdit):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    resourceName<span class="token operator">:</span> <span class="token string">'tag'</span><span class="token punctuation">,</span>

    <span class="token function-variable function">setupList</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>list<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// how is resource listed?</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">setupEdit</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>edit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// how is resource edited?</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>A list of controller properties and methods is examined bellow:</p> <h3 id="resourcename"><a href="#resourcename" class="header-anchor">#</a> resourceName</h3> <p>Controller property where we name the resource handled (tag, article, page...)</p> <div class="language-js extra-class"><pre class="language-js"><code>resourceName<span class="token operator">:</span> <span class="token string">'tag'</span>
</code></pre></div><h3 id="resourcecaption"><a href="#resourcecaption" class="header-anchor">#</a> resourceCaption</h3> <p>Controller property where we define resource caption mapping, default value is null. It is currently used only in mass actions component as a value for 'mapSelectedCaptionsTo' (if it is null, then it fallbacks to 'id') so it's recommended to always set resource caption value.</p> <div class="language-js extra-class"><pre class="language-js"><code>resourceCaption<span class="token operator">:</span> <span class="token string">'title'</span>
</code></pre></div><h3 id="resourcealias"><a href="#resourcealias" class="header-anchor">#</a> resourceÅlias</h3> <p>When 2 or more different UI controllers that connect to same resource (resourceName) are needed this property is used to separate them logically.
Resource alias will be used to construct different controller routes and to bind correct selected main navigation item.</p> <div class="language-js extra-class"><pre class="language-js"><code>resourceCaption<span class="token operator">:</span> <span class="token string">'userTag'</span>
</code></pre></div><h3 id="createrequiresdraft"><a href="#createrequiresdraft" class="header-anchor">#</a> createRequiresDraft</h3> <p>Property where we define if draft resource is needed when resource is created.
When createRequiresDraft is set to true controller will save empty resource object before creating interface is displayed.
Saved draft resource will receive id and be able to support related objects. False is default value.</p> <div class="language-js extra-class"><pre class="language-js"><code>createRequiresDraft<span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="createrelatedstrategy"><a href="#createrelatedstrategy" class="header-anchor">#</a> createRelatedStrategy</h3> <p>Property which defines which strategy is used for persisting main and related resources:</p> <ul><li>relatedFirst: related resources are saved before main resource (default behavior)</li> <li>relatedLast: related resources are saved after main resource is persisted</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>createRelatedStrategy<span class="token operator">:</span> <span class="token string">'relatedFirst'</span>
</code></pre></div><h3 id="includedrelationships"><a href="#includedrelationships" class="header-anchor">#</a> includedRelationships</h3> <p>Specify relationships to include in api payload for resource listing (index) and editing (edit)
Previously named &quot;includeApiData&quot; in versions up to v0.77, now deprecated.</p> <div class="language-js extra-class"><pre class="language-js"><code>includedRelationships<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    edit<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="includedfields-sparse-fieldsets"><a href="#includedfields-sparse-fieldsets" class="header-anchor">#</a> includedFields (sparse fieldsets)</h3> <p>Specify fields to include in api payload for resource listing (index) and editing (edit)</p> <div class="language-js extra-class"><pre class="language-js"><code>includedFields<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token punctuation">{</span>
        article<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'intro'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">,</span> <span class="token string">'tags'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        user<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'email'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="setuplist"><a href="#setuplist" class="header-anchor">#</a> setupList</h3> <p>Controller method where we define how resource is browsed, filtered and sorted in list view.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">setupList</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>list<span class="token punctuation">,</span> query<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addCreateControl</span><span class="token punctuation">(</span><span class="token string">'Create new tag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    list<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">'TextFormElement'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
        label<span class="token operator">:</span> <span class="token string">'Title'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    list<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">'TextListItem'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        caption<span class="token operator">:</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>
        mapTo<span class="token operator">:</span> <span class="token string">'id'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    list<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">'LinkListItem'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        caption<span class="token operator">:</span> <span class="token string">'Title'</span><span class="token punctuation">,</span>
        mapTo<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
        action<span class="token operator">:</span> <span class="token string">'editItem'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Following arguments are available:</p> <ul><li>list: instance of <a href="#resource-list">resourceList</a> object</li> <li>query: current resource query parameters (filters, sort, page...)</li></ul> <h3 id="setupedit"><a href="#setupedit" class="header-anchor">#</a> setupEdit</h3> <p>Controller method where we define form fields rendered when resource is created or updated.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">setupEdit</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>edit<span class="token punctuation">,</span> method<span class="token punctuation">,</span> resourceModel<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addToIndexControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addSaveControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    edit<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span><span class="token string">'TextFormElement'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        label<span class="token operator">:</span> <span class="token string">'Title'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'title'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><p>Following arguments are available:</p> <ul><li>edit: instance of <a href="#resource-edit">editHandler</a> object</li> <li>method: current resource authoring context ('edit' or 'create')</li> <li>resourceModel: instance of resource model that is currently edited (or created)</li></ul> <h3 id="openindex"><a href="#openindex" class="header-anchor">#</a> openIndex</h3> <p>Controller instance method which opens resource index or listing.</p> <div class="language-js extra-class"><pre class="language-js"><code>controller<span class="token punctuation">.</span><span class="token function">openIndex</span><span class="token punctuation">(</span>queryParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="openedit"><a href="#openedit" class="header-anchor">#</a> openEdit</h3> <p>Controller instance method which opens resource editing.</p> <div class="language-js extra-class"><pre class="language-js"><code>controller<span class="token punctuation">.</span><span class="token function">openEdit</span><span class="token punctuation">(</span>routeParams<span class="token punctuation">,</span> queryParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="opencreate"><a href="#opencreate" class="header-anchor">#</a> openCreate</h3> <p>Controller instance method which opens resource create.</p> <div class="language-js extra-class"><pre class="language-js"><code>controller<span class="token punctuation">.</span><span class="token function">openCreate</span><span class="token punctuation">(</span>queryParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addcreatecontrol"><a href="#addcreatecontrol" class="header-anchor">#</a> addCreateControl</h3> <p>Controller instance method which adds resource create control.</p> <div class="language-js extra-class"><pre class="language-js"><code>controller<span class="token punctuation">.</span><span class="token function">addCreateControl</span><span class="token punctuation">(</span>caption<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addsavecontrol"><a href="#addsavecontrol" class="header-anchor">#</a> addSaveControl</h3> <p>Controller instance method which adds resource save control.</p> <div class="language-js extra-class"><pre class="language-js"><code>controller<span class="token punctuation">.</span><span class="token function">addSaveControl</span><span class="token punctuation">(</span>caption<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addtoindexcontrol"><a href="#addtoindexcontrol" class="header-anchor">#</a> addToIndexControl</h3> <p>Controller instance method which adds resource list control.</p> <div class="language-js extra-class"><pre class="language-js"><code>controller<span class="token punctuation">.</span><span class="token function">addToIndexControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addcontrol"><a href="#addcontrol" class="header-anchor">#</a> addControl</h3> <p>Controller instance method which adds generic resource control.</p> <div class="language-js extra-class"><pre class="language-js"><code>controller<span class="token punctuation">.</span><span class="token function">addControl</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    caption<span class="token operator">:</span> <span class="token string">'myControl'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCreateUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    className<span class="token operator">:</span> <span class="token string">'accented iconPlus'</span><span class="token punctuation">,</span>
    action<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>openCreate
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="adddropdowncontrol"><a href="#adddropdowncontrol" class="header-anchor">#</a> addDropdownControl</h3> <p>Controller instance method which adds generic dropdown resource control.</p> <div class="language-js extra-class"><pre class="language-js"><code>controller<span class="token punctuation">.</span><span class="token function">addDropdownControl</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="resource-list"><a href="#resource-list" class="header-anchor">#</a> Resource list</h2> <p>Resource list is component responsible for handling resource browsing, filtering and sorting.
Examine <a href="/trim/list-elements.html">list elements</a> chapter to find out how each list element is configured.</p> <h3 id="additem"><a href="#additem" class="header-anchor">#</a> addItem</h3> <p>Method for defining what elements are displayed when resource is listed:</p> <div class="language-js extra-class"><pre class="language-js"><code>list<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">'TextListItem'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    caption<span class="token operator">:</span> <span class="token string">'Title'</span><span class="token punctuation">,</span>
    mapTo<span class="token operator">:</span> <span class="token string">'title'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addfilter"><a href="#addfilter" class="header-anchor">#</a> addFilter</h3> <p>Method for adding filter form elements when resource is listed:</p> <div class="language-js extra-class"><pre class="language-js"><code>list<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">'TextFormElement'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
    label<span class="token operator">:</span> <span class="token string">'Title'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addsort"><a href="#addsort" class="header-anchor">#</a> addSort</h3> <p>Method for adding sort options on resource list:</p> <div class="language-js extra-class"><pre class="language-js"><code>list<span class="token punctuation">.</span><span class="token function">addSort</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        label<span class="token operator">:</span> <span class="token string">'By title'</span><span class="token punctuation">,</span>
        field<span class="token operator">:</span> <span class="token string">'-title'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        label<span class="token operator">:</span> <span class="token string">'By date'</span><span class="token punctuation">,</span>
        field<span class="token operator">:</span> <span class="token string">'-date'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="filteralwaysby"><a href="#filteralwaysby" class="header-anchor">#</a> filterAlwaysBy</h3> <p>Method for setting persistent api filters.</p> <div class="language-js extra-class"><pre class="language-js"><code>list<span class="token punctuation">.</span><span class="token function">filterAlwaysBy</span><span class="token punctuation">(</span><span class="token string">'deleted'</span><span class="token punctuation">,</span> <span class="token string">'no'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
list<span class="token punctuation">.</span><span class="token function">filterAlwaysBy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>deleted<span class="token operator">:</span> <span class="token string">'no'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="filterinitiallyby"><a href="#filterinitiallyby" class="header-anchor">#</a> filterInitiallyBy</h3> <p>Method for setting initial api and UI filters.</p> <div class="language-js extra-class"><pre class="language-js"><code>list<span class="token punctuation">.</span><span class="token function">filterInitiallyBy</span><span class="token punctuation">(</span><span class="token string">'published'</span><span class="token punctuation">,</span> <span class="token string">'yes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
list<span class="token punctuation">.</span><span class="token function">filterInitiallyBy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>published<span class="token operator">:</span> <span class="token string">'yes'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="refreshitems"><a href="#refreshitems" class="header-anchor">#</a> refreshItems</h3> <p>Call to refresh current list context content</p> <div class="language-js extra-class"><pre class="language-js"><code>list<span class="token punctuation">.</span><span class="token function">refreshItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="settemplate"><a href="#settemplate" class="header-anchor">#</a> setTemplate</h3> <p>Method for choosing which template is used for resource listing ('table' and 'cards' are currently supported).</p> <div class="language-js extra-class"><pre class="language-js"><code>list<span class="token punctuation">.</span><span class="token function">setTemplate</span><span class="token punctuation">(</span><span class="token string">'cards'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addmassaction"><a href="#addmassaction" class="header-anchor">#</a> addMassAction</h3> <p>Method for adding mass actions to resource list.</p> <div class="language-js extra-class"><pre class="language-js"><code>list<span class="token punctuation">.</span><span class="token function">addMassAction</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        caption<span class="token operator">:</span> <span class="token string">'Publish'</span><span class="token punctuation">,</span>
        updateAttributes<span class="token operator">:</span> <span class="token punctuation">{</span>published<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="resource-edit"><a href="#resource-edit" class="header-anchor">#</a> Resource edit</h2> <p>Resource edit is component responsible for handling how resource is created or updated.</p> <h3 id="addfield"><a href="#addfield" class="header-anchor">#</a> addField</h3> <p>Method for defining what form elements are mapped to resource attributes and relations when resource is edited or created.
Examine <a href="/trim/form-elements.html">form elements</a> chapter to find out how each form element is configured.</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span><span class="token string">'TextFormElement'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    label<span class="token operator">:</span> <span class="token string">'Title'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'title'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="showfield"><a href="#showfield" class="header-anchor">#</a> showField</h3> <p>Show edit form field:</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">showField</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hidefield"><a href="#hidefield" class="header-anchor">#</a> hideField</h3> <p>Show edit form field:</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">hideField</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="togglefield"><a href="#togglefield" class="header-anchor">#</a> toggleField</h3> <p>Toggle edit form field (use second boolean argument to show or hide field)</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">toggleField</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="updatefield"><a href="#updatefield" class="header-anchor">#</a> updateField</h3> <p>Update edit field value and options / props</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">updateField</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token string">'Foo'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="updateallfields"><a href="#updateallfields" class="header-anchor">#</a> updateAllFields</h3> <p>Update all edit fields options</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">updateAllFields</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    editable<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="observe"><a href="#observe" class="header-anchor">#</a> observe</h3> <p>Observe and respond to form field value changes:</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token string">'formData.title'</span><span class="token punctuation">,</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Title changed: '</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="allowsave"><a href="#allowsave" class="header-anchor">#</a> allowSave</h3> <p>Allow or disallow resource saving:</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">allowSave</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="configurelayout"><a href="#configurelayout" class="header-anchor">#</a> configureLayout</h3> <p>Method for configuring edit and create layout. Supports tabs, regions and groups (all items are auto generated from layout reference).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// assign form element to layout region (main and side regions are supported) position with layoutReference</span>
edit<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span>TextFormElement<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    label<span class="token operator">:</span> <span class="token string">'Title'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
    layoutReference<span class="token operator">:</span> <span class="token string">'mainRegion'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

edit<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span>TextFormElement<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    label<span class="token operator">:</span> <span class="token string">'Meta data'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'meta'</span><span class="token punctuation">,</span>
    layoutReference<span class="token operator">:</span> <span class="token string">'sideRegion'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Altering layout configuration to set tab captions:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// configure tab layout caption</span>
edit<span class="token punctuation">.</span><span class="token function">configureLayout</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'mainTab.caption'</span><span class="token operator">:</span> <span class="token string">'Content and settings'</span><span class="token punctuation">,</span>
    <span class="token string">'seoTab.caption'</span><span class="token operator">:</span> <span class="token string">'SEO and meta data'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// assign form element to layout position with layoutReference</span>
editHandler<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span>TextFormElement<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    label<span class="token operator">:</span> <span class="token string">'Title'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
    layoutReference<span class="token operator">:</span> <span class="token string">'mainTab.mainRegion'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="selecttab"><a href="#selecttab" class="header-anchor">#</a> selectTab</h3> <p>Select edit layout tab:</p> <div class="language-js extra-class"><pre class="language-js"><code>edit<span class="token punctuation">.</span><span class="token function">selectTab</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="services"><a href="#services" class="header-anchor">#</a> Services</h2> <p>Application utilizes simple service container to register and locate components and services.
All form and list components are registered and retrieved from service container by default.</p> <p>Your resource controllers should also be registered as services.
We encourage you to do so with dynamic import to utilize webpack code splitting and load controller code only when it is requested.</p> <p>A typical service container with navigation and few registered controllers looks something like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">MainNavigation</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./controllers/mainNavigation'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">PageController</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./controllers/page'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">TagController</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./controllers/tag'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>If you need to access service container manually somewhere in your code:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> serviceContainer <span class="token keyword">from</span> <span class="token string">'trim/library/serviceContainer'</span><span class="token punctuation">;</span>

serviceContainer<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'myService'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

serviceContainer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'myService'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">myService</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myService<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs bar</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router"><a href="#router" class="header-anchor">#</a> Router</h2> <p>Application utilizes extended <a href="https://router.vuejs.org/" target="_blank" rel="noopener noreferrer">VueJS router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for linking and routing needs.
Your application routes typically look something like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token parameter">router</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    router<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'dashboard'</span><span class="token punctuation">,</span> <span class="token string">'Page@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    router<span class="token punctuation">.</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    router<span class="token punctuation">.</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string">'tag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    router<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'my-settings'</span><span class="token punctuation">,</span> <span class="token string">'mySettings'</span><span class="token punctuation">,</span> <span class="token string">'MySettings'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="router-controller"><a href="#router-controller" class="header-anchor">#</a> Router.controller</h3> <p>Method for defining routes with controller components.</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> routeName<span class="token punctuation">,</span> controllerString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ... is somewhat equivalent to...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span> <span class="token operator">+</span> path<span class="token punctuation">,</span>
    name<span class="token operator">:</span> routeName<span class="token punctuation">,</span>
    component<span class="token operator">:</span> AdminDefault<span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// set controller from service registry as child component of Default Admin component</span>
        <span class="token comment">// if method is defined it will be called after component is created</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="router-resource"><a href="#router-resource" class="header-anchor">#</a> Router.resource</h3> <p>Router resource method is a shortcut for defining 3 most used routes for resource:</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string">'tag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ... is equivalent to...</span>
router<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'tag/create'</span><span class="token punctuation">,</span> <span class="token string">'resource.tag.create'</span><span class="token punctuation">,</span> <span class="token string">'Tag@create'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'tag/:id'</span><span class="token punctuation">,</span> <span class="token string">'resource.tag.edit'</span><span class="token punctuation">,</span> <span class="token string">'Tag@edit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'tag'</span><span class="token punctuation">,</span> <span class="token string">'resource.tag.index'</span><span class="token punctuation">,</span> <span class="token string">'Tag@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="generating-links"><a href="#generating-links" class="header-anchor">#</a> Generating links</h3> <p>Generate links with router via route names and params:</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'resource.tag.index'</span><span class="token punctuation">)</span> <span class="token comment">// /tag;</span>
router<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'resource.tag.edit'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// /tag/2;</span>
router<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'resource.tag.edit'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// /tag/2?foo=3;</span>
</code></pre></div><h2 id="navigation"><a href="#navigation" class="header-anchor">#</a> Navigation</h2> <p>Navigation component is used to define main user navigation UI element.
Navigation links, user panel links, application name and current username are all defined in navigation component.</p> <h3 id="code-example"><a href="#code-example" class="header-anchor">#</a> Code example</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    <span class="token function-variable function">getNavigationItems</span><span class="token operator">:</span> <span class="token parameter">router</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>

        <span class="token punctuation">{</span>
            caption<span class="token operator">:</span> <span class="token string">'Pages'</span><span class="token punctuation">,</span>
            key<span class="token operator">:</span> <span class="token string">'page'</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span> router<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'resource.page.index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            icon<span class="token operator">:</span> <span class="token string">'Home'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{</span>
            caption<span class="token operator">:</span> <span class="token string">'Articles'</span><span class="token punctuation">,</span>
            key<span class="token operator">:</span> <span class="token string">'article'</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span> router<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'resource.article.index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            icon<span class="token operator">:</span> <span class="token string">'Copy'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{</span>
            caption<span class="token operator">:</span> <span class="token string">'Misc'</span><span class="token punctuation">,</span>
            icon<span class="token operator">:</span> <span class="token string">'ThreeDots'</span><span class="token punctuation">,</span>
            subItems<span class="token operator">:</span> <span class="token punctuation">[</span>

                <span class="token punctuation">{</span>
                    caption<span class="token operator">:</span> <span class="token string">'Categories'</span><span class="token punctuation">,</span>
                    key<span class="token operator">:</span> <span class="token string">'category'</span><span class="token punctuation">,</span>
                    url<span class="token operator">:</span> router<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'resource.category.index'</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>

                <span class="token punctuation">{</span>
                    caption<span class="token operator">:</span> <span class="token string">'Tags'</span><span class="token punctuation">,</span>
                    key<span class="token operator">:</span> <span class="token string">'tag'</span><span class="token punctuation">,</span>
                    url<span class="token operator">:</span> router<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'resource.tag.index'</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>

            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token function-variable function">getUserNavigationItems</span><span class="token operator">:</span> <span class="token parameter">router</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>

        <span class="token punctuation">{</span>
            caption<span class="token operator">:</span> <span class="token string">'My settings'</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span> router<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'mySettings'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            appLink<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{</span>
            caption<span class="token operator">:</span> <span class="token string">'Public pages'</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span> <span class="token string">'http://mySite.com'</span>'<span class="token punctuation">,</span>
            newTab<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{</span>
            caption<span class="token operator">:</span> <span class="token string">'Show search'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">action</span><span class="token operator">:</span> <span class="token parameter">mainNavigation</span> <span class="token operator">=&gt;</span> mainNavigation<span class="token punctuation">.</span><span class="token function">showSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token function-variable function">getProjectCaption</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'Trikoder CMS'</span><span class="token punctuation">,</span>

    <span class="token function-variable function">getUserCaption</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'Demo user'</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getnavigationitems"><a href="#getnavigationitems" class="header-anchor">#</a> getNavigationItems</h3> <p>Method &quot;getNavigationItems&quot; takes array of objects with following keys:</p> <ul><li>caption: for item caption</li> <li>key: prefix for &quot;Link&quot; class name</li> <li>url: url to point to</li> <li>icon: adds sufix to element icon classname (all current icon suffixes can be found in &quot;/src/scss/library/_variables.scss&quot; file, under $icons variable)</li></ul> <h3 id="getusernavigationitems"><a href="#getusernavigationitems" class="header-anchor">#</a> getUserNavigationItems</h3> <p>Method &quot;getUserNavigationItems&quot; takes array of objects with following keys:</p> <ul><li>caption: for item caption</li> <li>url : url to point to</li> <li>action: if url is ommited, application calls this function with mainNavigation as argument</li> <li>appLink: Boolean value, true is in app link</li> <li>newTab: adds target=&quot;_blank&quot; attribute to link</li> <li>icon: adds sufix to element icon classname (all current icon suffixes can be found in &quot;/src/scss/library/_variables.scss&quot; file, under $icons variable)</li></ul> <h3 id="getprojectcaption"><a href="#getprojectcaption" class="header-anchor">#</a> getProjectCaption</h3> <p>Use method &quot;getProjectCaption&quot; to set CMS project name.</p> <h3 id="getusercaption"><a href="#getusercaption" class="header-anchor">#</a> getUserCaption</h3> <p>Use method &quot;getUserCaption&quot; to set current user caption.</p> <h2 id="application"><a href="#application" class="header-anchor">#</a> Application</h2> <p>Application object is glue that ties all CMS components and services together.
It is used to connect services and routes, load translations, inject boot (config) data and start application.</p> <h3 id="code-example-2"><a href="#code-example-2" class="header-anchor">#</a> Code example</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> app <span class="token keyword">from</span> <span class="token string">'trim/app'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> translations <span class="token keyword">from</span> <span class="token string">'trim/lang/english'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> routes <span class="token keyword">from</span> <span class="token string">'./routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> services <span class="token keyword">from</span> <span class="token string">'./services'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">'./scss/main.scss'</span><span class="token punctuation">;</span>

app
    <span class="token punctuation">.</span><span class="token function">loadTranslations</span><span class="token punctuation">(</span>translations<span class="token punctuation">,</span> <span class="token string">'en'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">registerServices</span><span class="token punctuation">(</span>services<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">registerRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="registerservices"><a href="#registerservices" class="header-anchor">#</a> registerServices</h3> <p>Used to register user defined services to service container.</p> <h3 id="registerroutes"><a href="#registerroutes" class="header-anchor">#</a> registerRoutes</h3> <p>Used to register user defined routes to route registry.</p> <h3 id="loadtranslations"><a href="#loadtranslations" class="header-anchor">#</a> loadTranslations</h3> <p>Used to import translation data for specific locale.</p> <h3 id="setlocale"><a href="#setlocale" class="header-anchor">#</a> setLocale</h3> <p>Used to set application locale.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token string">'hr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// en by default</span>
</code></pre></div><h3 id="getlocale"><a href="#getlocale" class="header-anchor">#</a> getLocale</h3> <p>Used to get application locale.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// en by default;</span>
</code></pre></div><h3 id="beforeadminenter"><a href="#beforeadminenter" class="header-anchor">#</a> beforeAdminEnter</h3> <p>Used to set Promise function before creating admin instance.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">beforeAdminEnter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="start"><a href="#start" class="header-anchor">#</a> start</h3> <p>Once called application will setup router, services and main view components.</p> <h2 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h2> <p>Trim based application is configured by setting boot (or config) data in your main entry point.
Anything can be inserted in boot data storage, only &quot;baseUrl&quot; and &quot;baseApiUrl&quot; are mandatory.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setBootData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseUrl<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
    baseApiUrl<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_API_URL</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="use-browser-history-api"><a href="#use-browser-history-api" class="header-anchor">#</a> Use browser history api</h3> <p>Configure Trim application to use browser history api.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setBootData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    usesPushState<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="using-patch-for-resource-updates"><a href="#using-patch-for-resource-updates" class="header-anchor">#</a> Using patch for resource updates</h3> <p>Api adapter can be instructed to use 'PATCH' insted of 'PUT' method when updating JSON api resources.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setBootData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    usePatchForUpdate<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="configuring-resource-url-slugs"><a href="#configuring-resource-url-slugs" class="header-anchor">#</a> Configuring resource url slugs</h3> <p>JSON api resource url slugs can be customized via 'resourceToApiMap' config property.
Used this when JSON api resource type is not directly mapped to resource api url.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setBootData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    resourceToApiMap<span class="token operator">:</span> <span class="token punctuation">{</span>
        article<span class="token operator">:</span> <span class="token string">'articles'</span>
        user<span class="token operator">:</span> <span class="token string">'users'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="api-pagination-strategies"><a href="#api-pagination-strategies" class="header-anchor">#</a> Api pagination strategies</h3> <p>Trim comes with offset (default) and page based pagination strategies included.
Customize offset based strategy (creates api query like ?page[offset]=0&amp;page[limit]=15):</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setBootData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    apiPagination<span class="token operator">:</span> <span class="token punctuation">{</span>
        strategy<span class="token operator">:</span> <span class="token string">'offsetBased'</span><span class="token punctuation">,</span>
        offsetKey<span class="token operator">:</span> <span class="token string">'offset'</span><span class="token punctuation">,</span>
        limitKey<span class="token operator">:</span> <span class="token string">'limit'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Set and customize page based strategy (creates api query like ?page[number]=1&amp;page[size]=15):</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setBootData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    apiPagination<span class="token operator">:</span> <span class="token punctuation">{</span>
        strategy<span class="token operator">:</span> <span class="token string">'pageBased'</span><span class="token punctuation">,</span>
        numberKey<span class="token operator">:</span> <span class="token string">'number'</span><span class="token punctuation">,</span>
        limitKey<span class="token operator">:</span> <span class="token string">'size'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="validation-error-field"><a href="#validation-error-field" class="header-anchor">#</a> Validation error field</h3> <p>Configure error message lookup field when resource model has validation errors.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setBootData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    validationErrorField<span class="token operator">:</span> <span class="token string">'detail'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="other-boot-data-keys"><a href="#other-boot-data-keys" class="header-anchor">#</a> Other boot data keys</h3> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">setBootData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    itemsPerPage<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token comment">// default number of items per page</span>
    googleMapsApiKey<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span> <span class="token comment">// api key for google maps</span>
    ckEditorPath<span class="token operator">:</span> <span class="token string">'https://cdn.ckeditor.com/4.10.0/standard-all/'</span> <span class="token comment">// ckeditor CDN</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="access-boot-data-outside-of-main-entry-point"><a href="#access-boot-data-outside-of-main-entry-point" class="header-anchor">#</a> Access boot data outside of main entry point.</h3> <p>Boot data can later be retrieved like so:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> bootData <span class="token keyword">from</span> <span class="token string">'trim/library/bootData'</span><span class="token punctuation">;</span>
<span class="token function">bootData</span><span class="token punctuation">(</span><span class="token string">'baseUrl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs boot data baseUrl value</span>
</code></pre></div><h2 id="authentication"><a href="#authentication" class="header-anchor">#</a> Authentication</h2> <p>To authenticating users to your app you have to implement simple authentication driver.
Default view for authenticating with username and password is included in Trim.
Examine <a href="https://github.com/trikoder/trim/tree/master/src/js/library/auth.js" target="_blank" rel="noopener noreferrer">base auth api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for full implementation details.
Simple driver implementation is shown bellow:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> api <span class="token keyword">from</span> <span class="token string">'trim/library/api'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> auth <span class="token keyword">from</span> <span class="token string">'trim/library/auth'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> auth<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

    <span class="token function">isUserLogged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'accessToken'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">loginWithCredentials</span><span class="token punctuation">(</span><span class="token parameter">credentials</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>credentials<span class="token punctuation">.</span>username<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> credentials<span class="token punctuation">.</span>password<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'accessToken'</span><span class="token punctuation">,</span> <span class="token string">'testToken'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Login failed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">onAuthorization</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        api<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token string">'Bearer '</span> <span class="token operator">+</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'accessToken'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">onDeauthorization</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'accessToken'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> api<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">.</span>Authorization<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Inform application that you want to use auth driver you implemented:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// app.js</span>
<span class="token keyword">import</span> auth <span class="token keyword">from</span> <span class="token string">'./auth'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
app<span class="token punctuation">.</span><span class="token function">useAuth</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/trim/getting-started.html" class="prev">
          Getting started
        </a></span> <span class="next"><a href="/trim/adding-resource.html">
          Adding resource
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/trim/assets/js/app.2a52fffe.js" defer></script><script src="/trim/assets/js/9.ab60805a.js" defer></script>
  </body>
</html>
