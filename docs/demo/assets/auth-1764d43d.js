import{_ as m,X as p,I as r,o as i,c as u,b as s,t as o,m as h,w as d,x as l,y as _}from"./index-f949a84d.js";const c={props:{authApi:{type:Object,required:!0}},data:()=>({title:p("loginTitle")||r("auth.title"),usernameLabel:r("auth.usernameLabel"),passwordLabel:r("auth.passwordLabel"),username:"",password:"",error:void 0,loading:!1}),computed:{buttonCaption(){return r(this.loading?"auth.submitBtnLoadingCaption":"auth.submitBtnCaption")}},methods:{submitForm(){const e=this.authApi;this.error=void 0,this.loading||(this.loading=!0,Promise.resolve(e.isUserLogged()).then(t=>t&&e.teardownEnvironment()).then(()=>e.loginWithCredentials({username:this.username,password:this.password})).then(()=>{this.$router.navigateTo(e.afterLoginRoute.path)}).catch(t=>{this.loading=!1,this.error=t.message}))}}},b={class:"login"},f={class:"title"},g={key:0,class:"message error"},w={class:"formItem"},v={for:"username"},y={class:"formItem"},L={for:"password"},C={type:"submit",class:"cta"};function I(e,t,B,V,k,n){return i(),u("section",b,[s("h1",f,o(e.title),1),s("form",{class:"form",onSubmit:t[2]||(t[2]=_((...a)=>n.submitForm&&n.submitForm(...a),["prevent"]))},[e.error?(i(),u("div",g,o(e.error),1)):h("",!0),s("div",w,[s("label",v,o(e.usernameLabel),1),d(s("input",{type:"text",class:"textInput username","onUpdate:modelValue":t[0]||(t[0]=a=>e.username=a)},null,512),[[l,e.username]])]),s("div",y,[s("label",L,o(e.passwordLabel),1),d(s("input",{type:"password",class:"textInput password","onUpdate:modelValue":t[1]||(t[1]=a=>e.password=a)},null,512),[[l,e.password]])]),s("button",C,o(n.buttonCaption),1)],32)])}const F=m(c,[["render",I],["__scopeId","data-v-e973a67a"],["__file","auth.vue"]]);export{F as default};
