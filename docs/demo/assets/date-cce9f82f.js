import{_ as L,o as l,b as d,aa as T,f as N,A as j,n as v,g as u,t as m,w as F,ab as _,F as g,r as D,x as J,l as y,ac as K,O as M,a4 as q,a5 as G,H as b,e as P,z as Q}from"./index-0c1d77fd.js";const w=/,|\.|-| |:|\/|\\/,I=/D+/,E=/M+/,V=/Y+/,H=/h+/i,R=/m+/,Y=/s+/,A=/A/,X={props:{modelValue:{type:String,default:""},format:{type:String,default:"YYYY-MM-DD"},displayFormat:{type:String},editable:{type:Boolean,default:!0},hasInputElement:{type:Boolean,default:!0},inputAttributes:{type:Object},selectableYearRange:{type:[Number,Object,Function],default:40},startPeriod:{type:Object},parseDate:{type:Function},formatDate:{type:Function},pickTime:{type:Boolean,default:!1},pickMinutes:{type:Boolean,default:!0},pickSeconds:{type:Boolean,default:!1},use12HourClock:{type:Boolean,default:!1},isDateDisabled:{type:Function,default:()=>!1},nextMonthCaption:{type:String,default:"Next month"},prevMonthCaption:{type:String,default:"Previous month"},setTimeCaption:{type:String,default:"Set time:"},mobileBreakpointWidth:{type:Number,default:500},weekdays:{type:Array,default:()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},months:{type:Array,default:()=>["January","February","March","April","May","June","July","August","September","October","November","December"]},startWeekOnSunday:{type:Boolean,default:!1}},data(){return{inputValue:this.valueToInputFormat(this.modelValue),direction:void 0,positionClass:void 0,opened:!this.hasInputElement,currentPeriod:this.startPeriod||this.getPeriodFromValue(this.modelValue,this.format)}},computed:{valueDate(){const e=this.modelValue,t=this.format;return e?this.parseDateString(e,t):void 0},isReadOnly(){return!this.editable||this.inputAttributes&&this.inputAttributes.readonly},isValidValue(){const e=this.valueDate;return this.modelValue?!!e:!0},currentPeriodDates(){const{year:e,month:t}=this.currentPeriod,n=[],a=new Date(e,t,1),o=new Date,s=a.getDay(),i=this.startWeekOnSunday?s:s===0?6:s-1;if(i)for(let r=i;r>0;r--){const h=new Date(a);h.setDate(-(r-1)),n.push({outOfRange:!0,date:h})}for(;a.getMonth()===t;)n.push({date:new Date(a)}),a.setDate(a.getDate()+1);const p=n.length%7;if(p>0){const r=7-p;for(let h=1;h<=r;h++){const k=new Date(a);k.setDate(h),n.push({outOfRange:!0,date:k})}}return n.forEach(r=>{r.disabled=this.isDateDisabled(r.date),r.today=O(r.date,o),r.dateKey=[r.date.getFullYear(),r.date.getMonth()+1,r.date.getDate()].join("-"),r.selected=this.valueDate?O(r.date,this.valueDate):!1}),Z(n,7)},yearRange(){const e=this.currentPeriod.year,t=this.selectableYearRange,n=typeof t;let a=[];return n==="number"?a=W(e-t,e+t):n==="object"?a=W(t.from,t.to):n==="function"&&(a=t(this)),a.indexOf(e)<0&&(a.push(e),a=a.sort()),a},currentTime(){const e=this.valueDate;if(!e)return;const t=e.getHours(),n=e.getMinutes(),a=e.getSeconds();return{hours:t,minutes:n,seconds:a,isPM:C(t),hoursFormatted:(this.use12HourClock?x(t):t).toString(),minutesFormatted:f(n,2),secondsFormatted:f(a,2)}},directionClass(){return this.direction?`vdp${this.direction}Direction`:void 0},weekdaysSorted(){if(this.startWeekOnSunday){const e=this.weekdays.slice();return e.unshift(e.pop()),e}else return this.weekdays}},watch:{modelValue(e){this.isValidValue&&(this.inputValue=this.valueToInputFormat(e),this.currentPeriod=this.getPeriodFromValue(e,this.format))},currentPeriod(e,t){const n=new Date(e.year,e.month).getTime(),a=new Date(t.year,t.month).getTime();this.direction=n!==a?n>a?"Next":"Prev":void 0,n!==a&&this.$emit("periodChange",{year:e.year,month:e.month})}},beforeUnmount(){this.removeCloseEvents(),this.teardownPosition()},methods:{valueToInputFormat(e){return this.displayFormat&&this.formatDateToString(this.parseDateString(e,this.format),this.displayFormat)||e},getPeriodFromValue(e,t){const n=this.parseDateString(e,t)||new Date;return{month:n.getMonth(),year:n.getFullYear()}},parseDateString(e,t){return e?this.parseDate?this.parseDate(e,t):this.parseSimpleDateString(e,t):void 0},formatDateToString(e,t){return e?this.formatDate?this.formatDate(e,t):this.formatSimpleDateToString(e,t):""},parseSimpleDateString(e,t){let n,a,o,s,i,p;const r=e.split(w),h=t.split(w),k=h.length;for(let c=0;c<k;c++)h[c].match(I)?n=parseInt(r[c],10):h[c].match(E)?a=parseInt(r[c],10):h[c].match(V)?o=parseInt(r[c],10):h[c].match(H)?s=parseInt(r[c],10):h[c].match(R)?i=parseInt(r[c],10):h[c].match(Y)&&(p=parseInt(r[c],10));const U=new Date([f(o,4),f(a,2),f(n,2)].join("-"));if(!isNaN(U)){const c=new Date(o,a-1,n);return[[o,"setFullYear"],[s,"setHours"],[i,"setMinutes"],[p,"setSeconds"]].forEach(([S,z])=>{typeof S<"u"&&c[z](S)}),c}},formatSimpleDateToString(e,t){return t.replace(V,n=>Number(e.getFullYear().toString().slice(-n.length))).replace(E,n=>f(e.getMonth()+1,n.length)).replace(I,n=>f(e.getDate(),n.length)).replace(H,n=>f(A.test(t)?x(e.getHours()):e.getHours(),n.length)).replace(R,n=>f(e.getMinutes(),n.length)).replace(Y,n=>f(e.getSeconds(),n.length)).replace(A,n=>C(e.getHours())?"PM":"AM")},incrementMonth(e=1){const t=new Date(this.currentPeriod.year,this.currentPeriod.month),n=new Date(t.getFullYear(),t.getMonth()+e);this.currentPeriod={month:n.getMonth(),year:n.getFullYear()}},processUserInput(e){const t=this.parseDateString(e,this.displayFormat||this.format);this.inputValue=e,this.$emit("update:modelValue",t?this.formatDateToString(t,this.format):e)},toggle(){return this.opened?this.close():this.open()},open(){this.opened||(this.opened=!0,this.currentPeriod=this.startPeriod||this.getPeriodFromValue(this.modelValue,this.format),this.addCloseEvents(),this.setupPosition()),this.direction=void 0},close(){this.opened&&(this.opened=!1,this.direction=void 0,this.removeCloseEvents(),this.teardownPosition())},closeViaOverlay(e){this.hasInputElement&&e.target===this.$refs.outerWrap&&this.close()},addCloseEvents(){this.closeEventListener||(this.closeEventListener=e=>this.inspectCloseEvent(e),["click","keyup","focusin"].forEach(e=>document.addEventListener(e,this.closeEventListener)))},inspectCloseEvent(e){e.keyCode?e.keyCode===27&&this.close():e.target!==this.$el&&!this.$el.contains(e.target)&&this.close()},removeCloseEvents(){this.closeEventListener&&(["click","keyup","focusin"].forEach(e=>document.removeEventListener(e,this.closeEventListener)),delete this.closeEventListener)},setupPosition(){this.positionEventListener||(this.positionEventListener=()=>this.positionFloater(),window.addEventListener("resize",this.positionEventListener)),this.positionFloater()},positionFloater(){const e=this.$el.getBoundingClientRect();let t="vdpPositionTop",n="vdpPositionLeft";const a=()=>{const o=this.$refs.outerWrap.getBoundingClientRect(),s=o.height,i=o.width;window.innerWidth>this.mobileBreakpointWidth?(e.top+e.height+s>window.innerHeight&&e.top-s>0&&(t="vdpPositionBottom"),e.left+i>window.innerWidth&&(n="vdpPositionRight"),this.positionClass=["vdpPositionReady",t,n].join(" ")):this.positionClass="vdpPositionFixed"};this.$refs.outerWrap?a():this.$nextTick(a)},teardownPosition(){this.positionEventListener&&(this.positionClass=void 0,window.removeEventListener("resize",this.positionEventListener),delete this.positionEventListener)},clear(){this.$emit("update:modelValue","")},selectDateItem(e){if(!e.disabled){const t=new Date(e.date);this.currentTime&&(t.setHours(this.currentTime.hours),t.setMinutes(this.currentTime.minutes),t.setSeconds(this.currentTime.seconds)),this.$emit("update:modelValue",this.formatDateToString(t,this.format)),this.hasInputElement&&!this.pickTime&&this.close()}},set12HourClock(e){const t=new Date(this.valueDate),n=t.getHours();t.setHours(e==="PM"?n+12:n-12),this.$emit("update:modelValue",this.formatDateToString(t,this.format))},inputHours(e){const t=new Date(this.valueDate),n=t.getHours(),a=parseInt(e.target.value,10)||0,o=this.use12HourClock?1:0,s=this.use12HourClock?12:23,i=B(a,o,s);t.setHours(this.use12HourClock?$(i,C(n)):i),e.target.value=f(i,1),this.$emit("update:modelValue",this.formatDateToString(t,this.format))},inputTime(e,t){const n=new Date(this.valueDate),a=parseInt(t.target.value)||0,o=B(a,0,59);t.target.value=f(o,2),n[e](o),this.$emit("update:modelValue",this.formatDateToString(n,this.format))},onTimeInputFocus(e){e.target.select&&e.target.select()}}};function f(e,t){return typeof e<"u"?e.toString().length>t?e:new Array(t-e.toString().length+1).join("0")+e:void 0}function Z(e,t){const n=[];for(;e.length;)n.push(e.splice(0,t));return n}function O(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function W(e,t){const n=[];for(let a=e;a<=t;a++)n.push(a);return n}function x(e){const t=e%12;return t===0?12:t}function $(e,t){return t?e===12?e:e+12:e===12?0:e}function C(e){return e>=12}function B(e,t,n){return Math.min(Math.max(e,t),n)}const ee=["readonly","value"],te={class:"vdpInnerWrap"},ne={class:"vdpHeader"},se=["title"],ie=["title"],ae={class:"vdpPeriodControls"},re={class:"vdpPeriodControl"},oe=["value"],le={class:"vdpPeriodControl"},ue=["value"],de={class:"vdpTable"},ce={class:"vdpHeadCellContent"},he=["data-id","onClick"],pe={class:"vdpCellContent"},me={key:0,class:"vdpTimeControls"},fe={class:"vdpTimeCaption"},ye={class:"vdpTimeUnit"},ve=u("br",null,null,-1),ge=["disabled","value"],De={key:0,class:"vdpTimeSeparator"},be={key:1,class:"vdpTimeUnit"},ke=u("br",null,null,-1),Ce=["disabled","value"],Me={key:2,class:"vdpTimeSeparator"},Se={key:3,class:"vdpTimeUnit"},Te=u("br",null,null,-1),Fe=["disabled","value"],_e=["disabled"];function Pe(e,t,n,a,o,s){return l(),d("div",{class:v(["vdpComponent",{vdpWithInput:n.hasInputElement}])},[T(e.$slots,"default",{open:s.open,close:s.close,toggle:s.toggle,inputValue:o.inputValue,processUserInput:s.processUserInput,valueToInputFormat:s.valueToInputFormat},()=>[n.hasInputElement?(l(),d("input",M({key:0,type:"text"},n.inputAttributes,{readonly:s.isReadOnly,value:o.inputValue,onInput:t[0]||(t[0]=i=>n.editable&&s.processUserInput(i.target.value)),onFocus:t[1]||(t[1]=i=>n.editable&&s.open()),onClick:t[2]||(t[2]=i=>n.editable&&s.open())}),null,16,ee)):y("",!0),n.editable&&n.hasInputElement&&o.inputValue?(l(),d("button",{key:1,class:"vdpClearInput",type:"button",onClick:t[3]||(t[3]=(...i)=>s.clear&&s.clear(...i))})):y("",!0)]),N(K,{name:"vdp-toggle-calendar"},{default:j(()=>[o.opened?(l(),d("div",{key:0,class:v(["vdpOuterWrap",[o.positionClass,{vdpFloating:n.hasInputElement}]]),ref:"outerWrap",onClick:t[15]||(t[15]=(...i)=>s.closeViaOverlay&&s.closeViaOverlay(...i))},[u("div",te,[u("header",ne,[u("button",{class:"vdpArrow vdpArrowPrev",title:n.prevMonthCaption,type:"button",onClick:t[4]||(t[4]=i=>s.incrementMonth(-1))},m(n.prevMonthCaption),9,se),u("button",{class:"vdpArrow vdpArrowNext",type:"button",title:n.nextMonthCaption,onClick:t[5]||(t[5]=i=>s.incrementMonth(1))},m(n.nextMonthCaption),9,ie),u("div",ae,[u("div",re,[(l(),d("button",{class:v(s.directionClass),key:o.currentPeriod.month,type:"button"},m(n.months[o.currentPeriod.month]),3)),F(u("select",{"onUpdate:modelValue":t[6]||(t[6]=i=>o.currentPeriod.month=i)},[(l(!0),d(g,null,D(n.months,(i,p)=>(l(),d("option",{value:p,key:i},m(i),9,oe))),128))],512),[[_,o.currentPeriod.month]])]),u("div",le,[(l(),d("button",{class:v(s.directionClass),key:o.currentPeriod.year,type:"button"},m(o.currentPeriod.year),3)),F(u("select",{"onUpdate:modelValue":t[7]||(t[7]=i=>o.currentPeriod.year=i)},[(l(!0),d(g,null,D(s.yearRange,i=>(l(),d("option",{value:i,key:i},m(i),9,ue))),128))],512),[[_,o.currentPeriod.year]])])])]),u("table",de,[u("thead",null,[u("tr",null,[(l(!0),d(g,null,D(s.weekdaysSorted,(i,p)=>(l(),d("th",{class:"vdpHeadCell",key:p},[u("span",ce,m(i),1)]))),128))])]),(l(),d("tbody",{key:o.currentPeriod.year+"-"+o.currentPeriod.month,class:v(s.directionClass)},[(l(!0),d(g,null,D(s.currentPeriodDates,(i,p)=>(l(),d("tr",{class:"vdpRow",key:p},[(l(!0),d(g,null,D(i,r=>(l(),d("td",{class:v(["vdpCell",{selectable:n.editable&&!r.disabled,selected:r.selected,disabled:r.disabled,today:r.today,outOfRange:r.outOfRange}]),"data-id":r.dateKey,key:r.dateKey,onClick:h=>n.editable&&s.selectDateItem(r)},[T(e.$slots,"cellContent",{item:r},()=>[u("div",pe,m(r.date.getDate()),1)])],10,he))),128))]))),128))],2))]),n.pickTime&&s.currentTime?(l(),d("div",me,[u("span",fe,m(n.setTimeCaption),1),u("div",ye,[u("pre",null,[u("span",null,m(s.currentTime.hoursFormatted),1),ve]),u("input",{type:"number",pattern:"\\d*",class:"vdpHoursInput",onInput:t[8]||(t[8]=J((...i)=>s.inputHours&&s.inputHours(...i),["prevent"])),onFocusin:t[9]||(t[9]=(...i)=>s.onTimeInputFocus&&s.onTimeInputFocus(...i)),disabled:!n.editable,value:s.currentTime.hoursFormatted},null,40,ge)]),n.pickMinutes?(l(),d("span",De,":")):y("",!0),n.pickMinutes?(l(),d("div",be,[u("pre",null,[u("span",null,m(s.currentTime.minutesFormatted),1),ke]),n.pickMinutes?(l(),d("input",{key:0,type:"number",pattern:"\\d*",class:"vdpMinutesInput",onInput:t[10]||(t[10]=i=>s.inputTime("setMinutes",i)),onFocusin:t[11]||(t[11]=(...i)=>s.onTimeInputFocus&&s.onTimeInputFocus(...i)),disabled:!n.editable,value:s.currentTime.minutesFormatted},null,40,Ce)):y("",!0)])):y("",!0),n.pickSeconds?(l(),d("span",Me,":")):y("",!0),n.pickSeconds?(l(),d("div",Se,[u("pre",null,[u("span",null,m(s.currentTime.secondsFormatted),1),Te]),n.pickSeconds?(l(),d("input",{key:0,type:"number",pattern:"\\d*",class:"vdpSecondsInput",onInput:t[12]||(t[12]=i=>s.inputTime("setSeconds",i)),onFocusin:t[13]||(t[13]=(...i)=>s.onTimeInputFocus&&s.onTimeInputFocus(...i)),disabled:!n.editable,value:s.currentTime.secondsFormatted},null,40,Fe)):y("",!0)])):y("",!0),n.use12HourClock?(l(),d("button",{key:4,type:"button",class:"vdp12HourToggleBtn",disabled:!n.editable,onClick:t[14]||(t[14]=i=>s.set12HourClock(s.currentTime.isPM?"AM":"PM"))},m(s.currentTime.isPM?"PM":"AM"),9,_e)):y("",!0)])):y("",!0)])],2)):y("",!0)]),_:3})],2)}const we=L(X,[["render",Pe],["__file","index.vue"]]);const Ie={elementType:"date",components:{ElementWrapper:q,DatePick:we},mixins:[G],props:{modelValue:{type:String,default:""},format:{type:String,default:"YYYY-MM-DD"},displayFormat:{type:String,default:"DD.MM.YYYY"},isDateDisabled:{type:Function},pickTime:{type:Boolean,default:!1},pickMinutes:{type:Boolean,default:!0},pickSeconds:{type:Boolean,default:!0},parseDate:{type:Function},formatDate:{type:Function},selectableYearRange:[Number,Object,Function],startPeriod:Object,use12HourClock:Boolean,startWeekOnSunday:Boolean,nextMonthCaption:{type:String,default:()=>b("calendar.nextMonthCaption")},prevMonthCaption:{type:String,default:()=>b("calendar.prevMonthCaption")},setTimeCaption:{type:String,default:()=>b("calendar.setTimeCaption")}},computed:{dateInputAttributes(){return this.normalizeAttributes(this.inputAttributes,{readonly:!0})},weekdays(){return["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(e=>b("calendar.dayAbbreviations."+e))},months(){return["january","february","march","april","may","june","july","august","september","october","november","december"].map(e=>b("calendar.months."+e))}},methods:{processInputEvent(e){this.$emit("update:modelValue",e)}}};function Ee(e,t,n,a,o,s){const i=P("date-pick"),p=P("element-wrapper");return l(),Q(p,M({renderInputWrapper:!1},e.elementWrapperProps),{default:j(()=>[N(i,M(e.inputWrapperAttributes,{format:n.format,displayFormat:n.displayFormat,inputAttributes:s.dateInputAttributes,isDateDisabled:n.isDateDisabled,weekdays:s.weekdays,months:s.months,parseDate:n.parseDate,formatDate:n.formatDate,pickTime:n.pickTime,pickMinutes:n.pickMinutes,pickSeconds:n.pickSeconds,selectableYearRange:n.selectableYearRange,startPeriod:n.startPeriod,use12HourClock:n.use12HourClock,startWeekOnSunday:n.startWeekOnSunday,prevMonthCaption:n.prevMonthCaption,nextMonthCaption:n.nextMonthCaption,setTimeCaption:n.setTimeCaption,modelValue:n.modelValue,editable:e.isInteractive,"onUpdate:modelValue":s.processInputEvent}),null,16,["format","displayFormat","inputAttributes","isDateDisabled","weekdays","months","parseDate","formatDate","pickTime","pickMinutes","pickSeconds","selectableYearRange","startPeriod","use12HourClock","startWeekOnSunday","prevMonthCaption","nextMonthCaption","setTimeCaption","modelValue","editable","onUpdate:modelValue"])]),_:1},16)}const He=L(Ie,[["render",Ee],["__file","date.vue"]]);export{He as default};
