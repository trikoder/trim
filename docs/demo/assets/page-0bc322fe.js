import{P as a,a as o}from"./index-613732e6.js";const i={props:{className:{type:String,default:"pagePreviewType1"},url:{type:String,required:!0},screenSizes:{type:Array,default:()=>[320,728,1024,1300]}},data:()=>({currentSize:"100%"}),computed:{parsedScreenSizes(){return[{caption:"100%",size:"100%"}].concat(this.screenSizes.map(e=>typeof e=="object"?e:typeof e=="number"?{caption:e.toString(),size:e+"px"}:typeof e=="string"?{caption:e,size:e}:e))}},methods:{setSize(e){this.currentSize=e}}};function n(e){return e=typeof e=="string"?{url:e}:e,a({component:i,props:e,dark:!0,parent:e.parent||o.rootView})}const r={resourceName:"page",resourceCaption:"title",setupList({list:e}){this.addCreateControl("Create new page"),e.addFilter([["TextFormElement",{name:"title",label:"Title"}],["DateFormElement",{name:"publishDate",label:"Date"}],["SelectFormElement",{name:"published",label:"Status",selectOptions:[{caption:"All pages",value:""},{caption:"Published",value:"true"},{caption:"Unpublished",value:"false"}]}],["SelectFormElement",{name:"author",label:"Author",selectOptions:{resource:"user",mapCaptionTo:"email",prepend:[{caption:"All",value:""}]}}],["ExternalAdminFormElement",{name:"tags",label:"Tags",mapCaptionTo:"title",relation:{type:"hasOne",resourceName:"tag"}}],["CheckboxFormElement",{name:"special",label:"Special"}]]),e.addMassAction([{caption:"Publish",updateAttributes:{published:!0},updateMessage:{success:t=>"Total tems published: "+t.resolutions.length,error:t=>"Failed to publish: "+t.rejections.length}},{caption:"Unpublish",updateAttributes:{published:!1}},{caption:"Delete",action:t=>t.destroy(),confirm:!0,updateMessage:{success:"All selected items are deleted"}}]),e.addSort([{label:"By title",field:"-title"},{label:"By date",field:"-date"}]),e.addItem("TextListItem",{caption:"ID",mapTo:"id",addIf:this.screenIsLarge}),e.addItem("LinkListItem",{caption:"Title",mapTo:"title",action:"editItem"}),e.addItem("DateListItem",{caption:"Date",mapTo:"publishDate",ifEmpty:t=>"Date for page "+t.get("id")+" not set."}),e.addItem({Type:"DateTimeListItem",options:{caption:"Date and time",mapTo:"publishDate",ifEmpty:"Date time not set"}}),e.addItem([["TextListItem",{caption:"Author",mapTo:"author.email"}],{Type:"TextListItem",options:{caption:"Tags",mapTo:"tags.title",ifEmpty:'<span style="opacity: 0.5">No tags</span>'}}]),e.addItem("BlipListItem",{caption:"Published",mapTo:"published"}),e.addItem("ButtonListItem",{caption:"View",useIcon:"externalLink",action:t=>n("https://trikoder.github.io/trim/"),addIf:this.screenIsLarge}),e.addItem("ContextMenuListItem",{caption:"Actions",items:[{caption:"Edit",action:"editItem"},{caption:"Delete",action:"deleteItem",confirm:!0},{caption:t=>t.get("published")?"Unpublish":"Publish",updateAttributes:t=>({published:!t.get("published")})}]})},setupEdit({edit:e}){this.addToIndexControl().addSaveControl(),e.addField("TextFormElement",{label:"Title",name:"title",attributes:{input:{class:"inputType2 size2 fontBold"}},layoutReference:"mainRegion"}),e.addField("MultipleSelectFormElement",{name:"tags",label:"Tags",relation:{type:"hasMany",resourceName:"tag"},selectOptions:{resource:"tag",mapCaptionTo:"title"},layoutReference:"mainRegion"}),e.addField("HtmlFormElement",{label:"Body text",name:"bodyText",layoutReference:"mainRegion"}),e.addField("ExternalAdminFormElement",{name:"author",label:"Author",mapCaptionTo:"email",relation:{type:"hasOne",resourceName:"user"},layoutReference:"sideRegion"}),e.addField("DateTimeFormElement",{name:"publishDate",label:"Date",layoutReference:"sideRegion"}),e.addField("ColorFormElement",{name:"pageColor",label:"Page color",layoutReference:"sideRegion"}),e.addField("NumberFormElement",{name:"rank",label:"Page rank",layoutReference:"sideRegion"})}};export{r as default};
