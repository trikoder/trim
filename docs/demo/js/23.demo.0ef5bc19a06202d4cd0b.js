(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{305:function(t,e,a){var n=a(340);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(6).default)("03acc61a",n,!0,{})},339:function(t,e,a){"use strict";var n=a(305);a.n(n).a},340:function(t,e,a){(e=a(5)(!1)).push([t.i,'.stateSelectElement[data-v-70340a58]{display:inline-block;position:relative;background-color:#fff;border:1px solid #ddd;border-radius:.3em;overflow:hidden}.stateSelectElement.withNoOptions[data-v-70340a58]{background-color:#f9f9f9}.stateSelectElement.fullWidth[data-v-70340a58]{display:block}.stateSelectElement .stateCaption[data-v-70340a58]{font-size:1.4em;padding:.5714285714em .7142857143em}.stateSelectElement .stateCaption>span[data-v-70340a58]{-webkit-animation:slideDownFadeIn .5s;animation:slideDownFadeIn .5s;display:block}.stateSelectElement .select[data-v-70340a58]{-webkit-animation:slideDownFadeIn .5s;animation:slideDownFadeIn .5s;display:inline-block;position:relative;width:100%}.stateSelectElement .select[data-v-70340a58]:before{font-family:"cmsIconFont";speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;left:0;top:50%;margin:0;width:30px;height:30px;line-height:30px;margin-top:-15px;text-align:center;text-indent:0;content:"";left:auto;right:0;font-size:1.2em;color:#e03431}.stateSelectElement .select>button[data-v-70340a58]{margin:0;padding:0;border:0;cursor:pointer;background:none;font-size:1.4em;padding:.5714285714em 2.1428571429em .5714285714em .7142857143em;color:#303030;opacity:.7}.stateSelectElement .select>button[data-v-70340a58]::-moz-focus-inner{padding:0;border:0}.stateSelectElement .select>select[data-v-70340a58]{position:absolute;left:0;top:0;width:100%;height:100%;cursor:pointer;opacity:0;font-size:1.6em}.stateSelectElement .select.fullWidth[data-v-70340a58]{display:block}.stateSelectElement .select.disabled[data-v-70340a58]{opacity:.5}.stateSelectElement .controls[data-v-70340a58]{display:table;width:100%;background-color:#f9f9f9;border-top:1px solid #ddd}.stateSelectElement .updateBtn[data-v-70340a58]{display:table-cell;vertical-align:middle;font-size:1.2em;padding:.8333333333em .8333333333em;color:#666;text-transform:uppercase;letter-spacing:.03em;border-left:1px solid #ddd}.stateSelectElement .updateBtn[data-v-70340a58]:hover{color:#e03431}.stateSelectElement .selectContainer[data-v-70340a58]{width:100%;display:table-cell;vertical-align:middle}',""]),t.exports=e},418:function(t,e,a){"use strict";a.r(e);var n=a(13),i=a(0),s=a(3),o=a(14),r=a(19),l={elementType:"stateSelect",components:{ElementWrapper:o.a},mixins:[n.a],props:{value:[String,Boolean,Number],updateEntityOnChange:{type:Boolean,default:!1},updateControlCaption:{type:String,default:function(){return Object(s.a)("formElements.stateSelect.updateControlCaption")}},nextStatePlaceholderCaption:{type:String,default:function(){return Object(s.a)("formElements.stateSelect.nextStatePlaceholderCaption")}},states:{type:Array,required:!0,validator:function(t){return t.length>=2}}},data:function(){return{currentState:this.getStateFromValue(this.value)}},getInitialValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==t.value?t.value:t.states[0].value},created:function(){if(this.updateEntityOnChange&&(!this.resourceModel||this.resourceModel.isNew()))throw new Error("Existing resource model required for state select in live update mode")},beforeUpdate:function(){this.syncCurrentStateToModel()},computed:{selectableOptions:function(){var t=this;if("all"===this.currentState.transitions){var e=this.states.map((function(e){return t.getStateKey(e)})).filter((function(e){return e!==t.getStateKey(t.currentState)}));return this.getTransitionsOptions(e)}return this.getTransitionsOptions(this.currentState.transitions||[])},selectValue:function(){var t=this;if(this.updateEntityOnChange){var e=Object(i.m)(this.selectableOptions,(function(e){return e.value===t.value}));return e?e.value:this.selectableOptions.length&&this.selectableOptions[0].value}return this.value},selectCaption:function(){var t=this,e=Object(i.m)(this.selectableOptions,(function(e){return e.value===t.selectValue}));return e.value===this.currentState.value?this.nextStatePlaceholderCaption:e.caption},inputWrapperAttributes:function(){var t=this.normalizeAttributes(this.attributes.inputWrapper);return 0===this.selectableOptions.length&&this.addToAttribute(t,"class","withNoOptions"),t}},methods:{processInputEvent:function(t){var e=this.states[0].value,a=t.target.value;"number"==typeof e?a=parseFloat(a):"boolean"==typeof e&&(a="true"===a),this.$emit("input",a)},syncCurrentStateToModel:function(){if(this.resourceModel){var t=this.resourceModel.get(this.name);void 0!==t&&(this.currentState=this.getStateFromValue(t))}},getStateKey:function(t){return t.name||t.value},getStateFromValue:function(t){return Object(i.m)(this.states,(function(e){return e.value===t}))},persistState:function(){var t=this;r.b.create().setId(this.resourceModel.get("id")).setType(this.resourceModel.getType()).saveAttribute(this.name,this.selectValue).then((function(e){var a=e.get(t.name);t.resourceModel.setAttribute(t.name,a),t.$emit("input",a),t.currentState=t.getStateFromValue(a)}))},getTransitionsOptions:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.map((function(e){var a=t.states.find((function(a){return t.getStateKey(a)===e}));return{caption:a.actionCaption||a.caption,value:a.value,key:a.value.toString()}}));return!this.updateEntityOnChange&&a.length&&a.unshift({caption:this.currentState.caption,value:this.currentState.value,key:this.currentState.value.toString()}),a}}},c=(a(339),a(2)),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("element-wrapper",t._b({attrs:{renderInputWrapper:!1}},"element-wrapper",t.elementWrapperProps,!1),[a("div",t._b({staticClass:"stateSelectElement"},"div",t.inputWrapperAttributes,!1),[a("p",{staticClass:"stateCaption"},[a("span",[t._v(t._s(t.currentState.caption))])]),t._v(" "),t.selectableOptions.length&&t.isInteractive?a("div",{staticClass:"controls"},[a("div",{staticClass:"selectContainer"},[a("div",{staticClass:"select"},[a("button",{attrs:{type:"button"}},[t._v("↳  "+t._s(t.selectCaption))]),t._v(" "),a("select",{domProps:{value:t.selectValue},on:{input:t.processInputEvent}},t._l(t.selectableOptions,(function(e){return a("option",{key:e.key,domProps:{value:e.value}},[t._v(t._s(e.caption))])})),0)])]),t._v(" "),t.updateEntityOnChange?a("button",{staticClass:"updateBtn nBtn",attrs:{type:"button"},on:{click:t.persistState}},[t._v(t._s(t.updateControlCaption))]):t._e()]):t._e()])])}),[],!1,null,"70340a58",null);e.default=u.exports}}]);