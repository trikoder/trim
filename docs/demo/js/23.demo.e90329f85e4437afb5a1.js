(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{310:function(t,e,n){var a=n(346);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(4).default)("7de2f8eb",a,!0,{})},345:function(t,e,n){"use strict";var a=n(310);n.n(a).a},346:function(t,e,n){(e=n(3)(!1)).push([t.i,'.stateSelectElement[data-v-4e033d5f]{display:inline-block;position:relative;background-color:#fff;border:1px solid #ddd;border-radius:0.3em;overflow:hidden}.stateSelectElement.withNoOptions[data-v-4e033d5f]{background-color:#f9f9f9}.stateSelectElement.fullWidth[data-v-4e033d5f]{display:block}.stateSelectElement .stateCaption[data-v-4e033d5f]{font-size:1.4em;padding:.57143em .71429em}.stateSelectElement .stateCaption>span[data-v-4e033d5f]{-webkit-animation:slideDownFadeIn 0.5s;animation:slideDownFadeIn 0.5s;display:block}.stateSelectElement .select[data-v-4e033d5f]{-webkit-animation:slideDownFadeIn 0.5s;animation:slideDownFadeIn 0.5s;display:inline-block;position:relative;width:100%}.stateSelectElement .select[data-v-4e033d5f]:before{font-family:"cmsIconFont";speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;left:0;top:50%;margin:0;width:30px;height:30px;line-height:30px;margin-top:-15px;text-align:center;text-indent:0;content:"";left:auto;right:0;font-size:1.2em;color:#e03431}.stateSelectElement .select>button[data-v-4e033d5f]{margin:0;padding:0;border:0;cursor:pointer;background:none;font-size:1.4em;padding:.57143em 2.14286em .57143em .71429em;color:#303030;opacity:0.7}.stateSelectElement .select>button[data-v-4e033d5f]::-moz-focus-inner{padding:0;border:0}.stateSelectElement .select>select[data-v-4e033d5f]{position:absolute;left:0;top:0;width:100%;height:100%;cursor:pointer;opacity:0;font-size:1.6em}.stateSelectElement .select.fullWidth[data-v-4e033d5f]{display:block}.stateSelectElement .select.disabled[data-v-4e033d5f]{opacity:0.5}.stateSelectElement .controls[data-v-4e033d5f]{display:table;width:100%;background-color:#f9f9f9;border-top:1px solid #ddd}.stateSelectElement .updateBtn[data-v-4e033d5f]{display:table-cell;vertical-align:middle;font-size:1.2em;padding:.83333em .83333em;color:#666;text-transform:uppercase;letter-spacing:0.03em;border-left:1px solid #ddd}.stateSelectElement .updateBtn[data-v-4e033d5f]:hover{color:#e03431}.stateSelectElement .selectContainer[data-v-4e033d5f]{width:100%;display:table-cell;vertical-align:middle}\n',""]),t.exports=e},424:function(t,e,n){"use strict";n.r(e);var a=n(11),i=n(0),s=n(2),o=n(12),r=n(16),l={elementType:"stateSelect",components:{ElementWrapper:o.a},mixins:[a.a],props:{value:[String,Boolean,Number],updateEntityOnChange:{type:Boolean,default:!1},updateControlCaption:{type:String,default:function(){return Object(s.a)("formElements.stateSelect.updateControlCaption")}},nextStatePlaceholderCaption:{type:String,default:function(){return Object(s.a)("formElements.stateSelect.nextStatePlaceholderCaption")}},states:{type:Array,required:!0,validator:function(t){return t.length>=2}}},data:function(){return{currentState:this.getStateFromValue(this.value)}},getInitialValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==t.value?t.value:t.states[0].value},created:function(){if(this.updateEntityOnChange&&(!this.resourceModel||this.resourceModel.isNew()))throw new Error("Existing resource model required for state select in live update mode")},beforeUpdate:function(){this.syncCurrentStateToModel()},computed:{selectableOptions:function(){var t=this;if("all"===this.currentState.transitions){var e=this.states.map((function(e){return t.getStateKey(e)})).filter((function(e){return e!==t.getStateKey(t.currentState)}));return this.getTransitionsOptions(e)}return this.getTransitionsOptions(this.currentState.transitions||[])},selectValue:function(){var t=this;if(this.updateEntityOnChange){var e=Object(i.m)(this.selectableOptions,(function(e){return e.value===t.value}));return e?e.value:this.selectableOptions.length&&this.selectableOptions[0].value}return this.value},selectCaption:function(){var t=this,e=Object(i.m)(this.selectableOptions,(function(e){return e.value===t.selectValue}));return e.value===this.currentState.value?this.nextStatePlaceholderCaption:e.caption},inputWrapperAttributes:function(){var t=this.normalizeAttributes(this.attributes.inputWrapper);return 0===this.selectableOptions.length&&this.addToAttribute(t,"class","withNoOptions"),t}},methods:{processInputEvent:function(t){var e=this.states[0].value,n=t.target.value;"number"==typeof e?n=parseFloat(n):"boolean"==typeof e&&(n="true"===n),this.$emit("input",n)},syncCurrentStateToModel:function(){if(this.resourceModel){var t=this.resourceModel.get(this.name);void 0!==t&&(this.currentState=this.getStateFromValue(t))}},getStateKey:function(t){return t.name||t.value},getStateFromValue:function(t){return Object(i.m)(this.states,(function(e){return e.value===t}))},persistState:function(){var t=this;r.b.create().setId(this.resourceModel.get("id")).setType(this.resourceModel.getType()).saveAttribute(this.name,this.selectValue).then((function(e){var n=e.get(t.name);t.resourceModel.setAttribute(t.name,n),t.$emit("input",n),t.currentState=t.getStateFromValue(n)}))},getTransitionsOptions:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.map((function(e){var n=t.states.find((function(n){return t.getStateKey(n)===e}));return{caption:n.actionCaption||n.caption,value:n.value,key:n.value.toString()}}));return!this.updateEntityOnChange&&n.length&&n.unshift({caption:this.currentState.caption,value:this.currentState.value,key:this.currentState.value.toString()}),n}}},u=(n(345),n(1)),c=Object(u.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("element-wrapper",t._b({attrs:{renderInputWrapper:!1}},"element-wrapper",t.elementWrapperProps,!1),[n("div",t._b({staticClass:"stateSelectElement"},"div",t.inputWrapperAttributes,!1),[n("p",{staticClass:"stateCaption"},[n("span",[t._v(t._s(t.currentState.caption))])]),t._v(" "),t.selectableOptions.length&&t.isInteractive?n("div",{staticClass:"controls"},[n("div",{staticClass:"selectContainer"},[n("div",{staticClass:"select"},[n("button",{attrs:{type:"button"}},[t._v("↳  "+t._s(t.selectCaption))]),t._v(" "),n("select",{domProps:{value:t.selectValue},on:{input:t.processInputEvent}},t._l(t.selectableOptions,(function(e){return n("option",{key:e.key,domProps:{value:e.value}},[t._v(t._s(e.caption))])})),0)])]),t._v(" "),t.updateEntityOnChange?n("button",{staticClass:"updateBtn nBtn",attrs:{type:"button"},on:{click:t.persistState}},[t._v(t._s(t.updateControlCaption))]):t._e()]):t._e()])])}),[],!1,null,"4e033d5f",null);e.default=c.exports}}]);