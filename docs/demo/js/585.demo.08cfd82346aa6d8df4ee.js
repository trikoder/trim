(self.webpackChunk_trikoder_trim=self.webpackChunk_trikoder_trim||[]).push([[585],{3646:function(e,t,i){"use strict";i.r(t);var o=i(8081),n=i.n(o),a=i(3645),r=i.n(a)()(n());r.push([e.id,".mediaInputType1{display:inline-block;position:relative;padding:.5em;padding-right:4em;overflow:hidden;background-color:#fff;border:1px solid #ddd;border-radius:.3em}.mediaInputType1>.mediaContainer{width:7em;height:5.25em;line-height:5.25em;display:inline-block;vertical-align:middle;margin-right:1.5em;position:relative;background-color:#f5f5f5;border-radius:.3em;text-align:center}.mediaInputType1>.mediaContainer>img{max-width:7em;max-height:5.25em;display:inline-block;vertical-align:middle;border-radius:.3em}@media screen and (min-width: 61.3125em){.mediaInputType1>.mediaContainer{width:12em;height:9em;line-height:9em}.mediaInputType1>.mediaContainer>img{max-width:12em;max-height:9em}}.mediaInputType1 .zoomInBtn{transition:opacity .3s;position:absolute;left:50%;top:50%;margin:-2em 0 0 -2em;width:4em;height:4em;background-color:rgba(0,0,0,.8);border-radius:50%;opacity:0;color:#fff}.mediaInputType1 .zoomInBtn:before{font-size:1.5em}.mediaInputType1>.mediaContainer:hover>.zoomInBtn{opacity:1}.mediaInputType1 .placeholderImage{position:absolute;left:0;top:0;width:100%;height:100%;color:#666}.mediaInputType1 .placeholderImage:before{font-size:1.8em}.mediaInputType1 .placeholderImage.large:before{font-size:3em}.mediaInputType1 .placeholderImage.interactive{cursor:pointer}.mediaInputType1>.textControls{font-size:1.7em;display:inline-block;vertical-align:middle;box-sizing:border-box;max-width:50%;color:#666;cursor:pointer}@media screen and (min-width: 68.8125em){.mediaInputType1>.textControls{max-width:70%}}.mediaInputType1>.dz-preview>div{display:none}.mediaInputType1>.dz-preview>.dz-progress{display:block;position:absolute;left:0;bottom:0;right:0;height:1px;background-color:#e5e5e5}.mediaInputType1>.dz-preview>.dz-progress>.dz-upload{display:block;height:100%;background-color:#e03431}.mediaInputType1 .openBtn:hover,.mediaInputType1 .fileUploadHandle:hover{color:#303030}.mediaInputType1 .removeBtn,.mediaInputType1 .editBtn,.mediaInputType1 .downloadBtn{position:absolute;right:0;top:0;bottom:50%;width:3.5em;height:auto;box-sizing:border-box;border-left:1px solid #e5e5e5;color:#b7b7b7}.mediaInputType1 .removeBtn:hover,.mediaInputType1 .editBtn:hover,.mediaInputType1 .downloadBtn:hover{color:#919191}.mediaInputType1 .removeBtn:before,.mediaInputType1 .editBtn:before,.mediaInputType1 .downloadBtn:before{font-size:1.8em}.mediaInputType1 .removeBtn{top:50%;bottom:0}.mediaInputType1 .removeBtn:before{font-size:1.8em}",""]),t.default=r},7044:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return z}});var o=i(6252),n=i(3577),a={class:"mediaContainer"},r=["src"],d={class:"textControls"},l={class:"separator"},p=i(7784),s=i(7231),m=i(6564),u=i(640),c=i(5511),h=i(4105),g=i(2025),f=i.n(g),y=i(7029),b=i(5669),I=i(6777),v=i(2319),M=i.n(v),T=(i(1719),{elementType:"media",components:{ElementWrapper:s.Z},mixins:[p.Z],props:{modelValue:{type:String,default:""},acceptedFiles:{type:String},maxFileSize:{type:Number},mapImageTo:{type:[String,Function],default:"thumbnailUrl"},mapLargeImageTo:{type:[String,Function],default:"originalUrl"},mediaControllerQuery:{type:Object},enableUpload:{type:Boolean,default:!0},uploadUrl:String,uploadParameter:{type:String,default:"binary"},uploadHeaders:Object,mediaType:{type:String,default:"image"},editAfterUpload:{type:Boolean,default:!1},prepareModelFromUpload:{type:Function,default:function(e,t){return u.H.getFromApi({url:e.xhr.getResponseHeader("Location")})}},formatUploadErrorMessage:{type:Function,default:function(e){return e}},changeImageCaption:{type:String,default:function(){return(0,c.Z)("formElements.media.changeImageCaption")}},chooseImageCaption:{type:String,default:function(){return(0,c.Z)("formElements.media.chooseImageCaption")}},uploadImageCaption:{type:String,default:function(){return(0,c.Z)("formElements.media.uploadImageCaption")}},separatorCaption:{type:String,default:function(){return(0,c.Z)("formElements.media.separatorCaption")}}},data:function(){return{mediaModel:void 0}},computed:{thumbImageUrl:function(){return this.mediaModel?this.getModelMapping(this.mapImageTo):void 0},largeImageUrl:function(){return this.mediaModel?this.getModelMapping(this.mapLargeImageTo):void 0},mediaController:function(){return this.relation&&this.relation.resourceName||this.name}},watch:{modelValue:"syncMediaModel"},created:function(){this.syncMediaModel()},mounted:function(){var e=this;this.$watch("isInteractive",(function(t){t&&e.enableUpload?e.setupUpload():e.disableUpload()}),{immediate:!0})},beforeUnmount:function(){this.lightbox&&this.lightbox.destroy(),this.disableUpload()},methods:{syncMediaModel:function(){var e=this;if(!this.modelValue)return this.mediaModel=void 0,Promise.resolve();if(this.mediaModel&&this.mediaModel.get("id")===this.modelValue)return Promise.resolve(this.mediaModel);if(this.resourceModel){var t=this.resourceModel.get(this.name);if(t&&t.get("id")===this.modelValue)return this.mediaModel=t,Promise.resolve(t)}return u.H.getFromApi({type:this.relation&&this.relation.resourceName||this.name,id:this.modelValue}).then((function(t){return e.mediaModel=t,t}))},setupUpload:function(){var e=this,t=this.$refs.wrapper.$refs.inputWrapper,i=this.uploadUrl||u.H.extend({type:this.relation&&this.relation.resourceName||this.name},{baseUrl:(0,y.Z)("baseApiUrl","/api/")}).url()+"/upload",o=this.dropzone=new(f())(t,{url:i,acceptedFiles:this.acceptedFiles,maxFilesize:this.maxFileSize,params:this.mediaType&&{mediaType:this.mediaType},maxFiles:1,paramName:this.uploadParameter,headers:(0,m.f0)((0,m.bb)({},b.Z.defaults.headers.common,["Authorization"]),this.uploadHeaders)});o.on("success",(function(t,i){e.prepareModelFromUpload(t,i).then((function(t){return e.onModelUpload(t)})),o.removeFile(t)})).on("error",(function(t,i){(0,I.i)({message:e.formatUploadErrorMessage(i),acceptText:(0,c.Z)("prompt.continueText"),acceptOnly:!0,parent:e})}))},disableUpload:function(){this.dropzone&&(this.dropzone.disable(),this.dropzone.destroy(),delete this.dropzone)},openFileDialog:function(){this.enableUpload&&this.dropzone&&this.dropzone.hiddenFileInput.click()},onModelUpload:function(e){var t=this;if(this.editAfterUpload)var i=h.Z.open({controller:this.mediaController,controllerMethod:"edit",controllerMethodParams:[{id:e.get("id")}],afterControllerMount:function(e){return t.assignOnSave(e,i)},parent:this});else this.mediaModel=e,this.$emit("update:modelValue",e.get("id"))},assignOnSave:function(e,t){var i=this;e.$emitter.once("resourceSaved",(function(e){var o=e.resourceModel;i.mediaModel=o,i.$emit("update:modelValue",o.get("id")),t.$destroy()}))},zoomImage:function(){var e=this;this.lightbox&&this.lightbox.destroy(),this.lightbox=M().open({items:[this.largeImageUrl||this.thumbImageUrl],beforeUnmount:function(){delete e.lightbox}})},openEdit:function(){h.Z.open({controller:this.mediaController,controllerMethod:"edit",controllerMethodParams:[{id:this.mediaModel.get("id")}],parent:this})},selectMedia:function(){var e=this,t=h.Z.select(this.mediaController,(function(t){e.mediaModel=t,e.$emit("update:modelValue",t.get("id"))}),{controllerMethodParams:[{},this.mediaControllerQuery||{}],afterControllerMount:function(i){return e.assignOnSave(i,t)},parent:this})},unsetValue:function(){return this.$emit("update:modelValue",""),this},getModelMapping:function(e){return"function"==typeof e?e(this.mediaModel):this.mediaModel.get(e)}}});i(7738);const C=(0,i(3744).Z)(T,[["render",function(e,t,i,p,s,m){var u=(0,o.up)("element-wrapper");return(0,o.wg)(),(0,o.j4)(u,(0,o.dG)({ref:"wrapper"},e.elementWrapperProps),{default:(0,o.w5)((function(){return[(0,o._)("div",a,[e.mediaModel?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("img",{src:m.thumbImageUrl},null,8,r),(0,o._)("button",{type:"button",onClick:t[0]||(t[0]=function(){return m.zoomImage&&m.zoomImage.apply(m,arguments)}),class:"zoomInBtn nBtn icr iconMaximize"})],64)):((0,o.wg)(),(0,o.iD)("button",{key:1,type:"button",class:(0,n.C_)(["nBtn placeholderImage icr iconPlus",{interactive:i.enableUpload}]),onClick:t[1]||(t[1]=function(t){return e.isInteractive&&m.openFileDialog()})},null,2))]),(0,o._)("div",d,[(0,o._)("span",{class:"openBtn",onClick:t[2]||(t[2]=function(t){return e.isInteractive&&m.selectMedia()})},(0,n.zw)(e.mediaModel?i.changeImageCaption:i.chooseImageCaption),1),i.enableUpload?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("span",l,(0,n.zw)(i.separatorCaption),1),(0,o._)("span",{onClick:t[3]||(t[3]=function(t){return e.isInteractive&&m.openFileDialog()}),class:"fileUploadHandle"},(0,n.zw)(i.uploadImageCaption),1)],64)):(0,o.kq)("",!0)]),e.mediaModel&&e.isInteractive?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("button",{type:"button",onClick:t[4]||(t[4]=function(){return m.openEdit&&m.openEdit.apply(m,arguments)}),class:"editBtn nBtn icr iconEdit2"}),(0,o._)("button",{type:"button",onClick:t[5]||(t[5]=function(){return m.unsetValue&&m.unsetValue.apply(m,arguments)}),class:"removeBtn nBtn icr iconTrash"})],64)):(0,o.kq)("",!0)]})),_:1},16)}]]);var z=C},7738:function(e,t,i){var o=i(3646);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,i(5346).Z)("7b7853da",o,!0,{})}}]);