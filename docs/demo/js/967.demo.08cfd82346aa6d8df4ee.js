(self.webpackChunk_trikoder_trim=self.webpackChunk_trikoder_trim||[]).push([[967],{1161:function(e,t,a){"use strict";a.r(t);var n=a(8081),r=a.n(n),o=a(3645),i=a.n(o)()(r());i.push([e.id,'.mapElementType1{position:relative;padding:.5em;padding-bottom:50%;background-color:#fff;border:1px solid #ddd;border-radius:.3em}.mapElementType1>.container{position:absolute;left:.5em;top:.5em;right:.5em;bottom:.5em}.mapElementType1>.disableOverlay{position:absolute;left:.5em;top:.5em;right:.5em;bottom:.5em}.mapElementType1 .mapSearch{padding:1em}.mapElementType1 .mapSearch:before{font-size:1.2em;opacity:.5;left:.4em}.mapElementType1 .mapSearch>input{appearance:none;font-family:"Archivo Narrow",sans-serif;font-weight:400;font-style:normal;font-size:1.6em;min-width:12.5em;padding:.3125em;padding-left:1.5625em;border:0;background-color:#fff;box-shadow:0 .1em .3em rgba(0,0,0,.1);border-radius:.1875em}.mapElementType1 .removeMarker{font-family:"Archivo Narrow",sans-serif;font-weight:400;font-style:normal;font-size:1.2727272727em;color:#6f6a61;display:block;margin:.7142857143em;padding:.3571428571em 1.5714285714em .3571428571em .7142857143em;background-color:#e9e8e6;border-radius:.2142857143em;opacity:.9}.mapElementType1 .removeMarker:hover{opacity:1}.mapElementType1 .removeMarker:before{left:auto;right:0;font-size:.6em;width:25px}',""]),t.default=i},3967:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var n,r=a(6252),o=a(3577),i={key:0,class:"disableOverlay"},l=a(7784),p=a(7231),s=a(6564),m=a(7029),u=a(8955),d=a(5511),c={elementType:"map",components:{ElementWrapper:p.Z},mixins:[l.Z],props:{modelValue:{type:String,default:""},zoom:{type:Number,default:12},delimiter:{type:String,default:","},initialLat:{type:Number,default:45.79815157817745},initialLng:{type:Number,default:15.970237255096436},search:{type:Boolean,default:!0},mapOptions:{type:Object}},data:function(){return{shouldDisplayMap:this.visible}},watch:{modelValue:function(e){this.shouldDisplayMap&&(e?this.setMarker(this.parseLatLng(e)):this.removeMarker())}},mounted:function(){var e=this,t=this.$watch("visible",(function(a){a&&(e.shouldDisplayMap=!0,e.$nextTick((function(){t(),e.bootstrapMap()})))}),{immediate:!0})},methods:{parseLatLng:function(e){var t=e.split(this.delimiter).map((function(e){return parseFloat(e)}));return{lat:t[0],lng:t[1]}},bootstrapMap:function(){var e=this;return this.bootstrapMapPromise||(this.bootstrapMapPromise=(n||(n=a.e(78).then(a.bind(a,3078)).then((function(e){return new(0,e.Loader)((0,m.Z)("googleMapsApiKey"),{libraries:["places"],language:u.Z.getLocale()}).load().then((function(e){return e}))})))).then((function(t){var a=e.modelValue?e.parseLatLng(e.modelValue):{lat:e.initialLat,lng:e.initialLng},n=e.map=new t.maps.Map(e.$refs.mapContainer,(0,s.f0)({center:a,zoom:e.zoom,disableDefaultUI:!0},e.mapOptions));return e.modelValue&&e.setMarker(a),e.search&&e.setupSearch(t,n),t.maps.event.addListener(n,"click",(function(t){e.$emit("update:modelValue",[t.latLng.lat(),t.latLng.lng()].join(e.delimiter))})),{map:n,google:t}}))),this.bootstrapMapPromise},setupSearch:function(e,t){var a=this,n=(0,s.q_)('\n                <div class="mapSearch iconSearch">\n                    <input placeholder="'.concat((0,d.Z)("formElements.map.searchPlaceholder"),'" type="text" />\n                </div>\n            ')),r=n.querySelector("input");r.addEventListener("keydown",(function(e){13===e.which&&(e.preventDefault(),e.stopPropagation())})),t.controls[e.maps.ControlPosition.TOP_LEFT].push(n);var o=new e.maps.places.SearchBox(r);e.maps.event.addListener(o,"places_changed",(function(){var e=o.getPlaces()[0].geometry.location;a.$emit("update:modelValue",[e.lat(),e.lng()].join(a.delimiter))}))},setMarker:function(e){var t=this;this.bootstrapMap().then((function(a){var n=a.map,r=a.google;if(!t.marker){t.marker=new r.maps.Marker({map:n,draggable:!0,position:e}),r.maps.event.addListener(t.marker,"dragend",(function(e){t.$emit("update:modelValue",[e.latLng.lat(),e.latLng.lng()].join(t.delimiter))}));var o=(0,s.q_)('\n                        <button type="button" class="removeMarker nBtn iconClose">\n                            '.concat((0,d.Z)("formElements.map.removeMarkerCaption"),"\n                        </button>\n                    "));o.addEventListener("click",(function(){return t.$emit("update:modelValue","")})),n.controls[r.maps.ControlPosition.TOP_RIGHT].push(o)}t.marker.setPosition(e),n.panTo(e)}))},removeMarker:function(){var e=this;this.bootstrapMap().then((function(t){var a=t.map,n=t.google;a.controls[n.maps.ControlPosition.TOP_RIGHT].clear(),e.marker&&e.marker.setMap(null),delete e.marker}))}}};a(651);var f=(0,a(3744).Z)(c,[["render",function(e,t,a,n,l,p){var s=(0,r.up)("element-wrapper");return(0,r.wg)(),(0,r.j4)(s,(0,o.vs)((0,r.F4)(e.elementWrapperProps)),{default:(0,r.w5)((function(){return[t[0]||((0,r.qZ)(-1),t[0]=(0,r._)("div",(0,r.dG)({ref:"mapContainer"},e.inputAttributes,{class:"container"}),null,16),(0,r.qZ)(1),t[0]),e.isInteractive?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",i))]})),_:1},16)}]])},651:function(e,t,a){var n=a(1161);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,a(5346).Z)("78ac552a",n,!0,{})}}]);